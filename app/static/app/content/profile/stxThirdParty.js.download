(function(){function _stxThirdParty_js(_exports){(function(window,document){var html=document.documentElement;var body=document.body;var define=function(object,property,getter){if(typeof object[property]==='undefined'){Object.defineProperty(object,property,{get:getter});}};define(window,'innerWidth',function(){return html.clientWidth});define(window,'innerHeight',function(){return html.clientHeight});define(window,'scrollX',function(){return window.pageXOffset||html.scrollLeft});define(window,'scrollY',function(){return window.pageYOffset||html.scrollTop});define(document,'width',function(){return Math.max(body.scrollWidth,html.scrollWidth,body.offsetWidth,html.offsetWidth,body.clientWidth,html.clientWidth)});define(document,'height',function(){return Math.max(body.scrollHeight,html.scrollHeight,body.offsetHeight,html.offsetHeight,body.clientHeight,html.clientHeight)});return define;}(window,document));!window.addEventListener&&(function(WindowPrototype,DocumentPrototype,ElementPrototype,addEventListener,removeEventListener,dispatchEvent,registry){WindowPrototype[addEventListener]=DocumentPrototype[addEventListener]=ElementPrototype[addEventListener]=function(type,listener){var target=this;registry.unshift([target,type,listener,function(event){event.currentTarget=target;event.preventDefault=function(){event.returnValue=false};event.stopPropagation=function(){event.cancelBubble=true};event.target=event.srcElement||target;if(typeof listener=="function")
listener.call(target,event);}]);this.attachEvent("on"+ type,registry[0][3]);};WindowPrototype[removeEventListener]=DocumentPrototype[removeEventListener]=ElementPrototype[removeEventListener]=function(type,listener){for(var index=0,register;register=registry[index];++index){if(register[0]==this&&register[1]==type&&register[2]==listener){return this.detachEvent("on"+ type,registry.splice(index,1)[0][3]);}}};WindowPrototype[dispatchEvent]=DocumentPrototype[dispatchEvent]=ElementPrototype[dispatchEvent]=function(eventObject){return this.fireEvent("on"+ eventObject.type,eventObject);};})(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);if(typeof window!=='undefined')
window.OldIntl=window.Intl;window.Intl=window.Intl||(function(Intl){"use strict";var
hop=Object.prototype.hasOwnProperty,defineProperty=(!window.isIE8&&Object.defineProperty)||function(obj,name,desc){if(desc.get&&obj.__defineGetter__)
obj.__defineGetter__(name,desc.get);else if(desc.value||desc.get)
obj[name]=desc.value||desc.get;},arrIndexOf=Array.prototype.indexOf||function(search){var t=this;if(!t.length)
return-1;for(var i=arguments[1]||0,max=t.length;i<max;i++){if(t[i]===search)
return i;}},objCreate=Object.create||function(proto,props){var obj;function F(){}
F.prototype=proto;obj=new F();for(var k in props){if(hop.call(props,k))
defineProperty(obj,k,props[k]);}
return obj;},arrSlice=Array.prototype.slice,arrConcat=Array.prototype.concat,arrPush=Array.prototype.push,arrJoin=Array.prototype.join,arrShift=Array.prototype.shift,fnBind=Function.prototype.bind||function(thisObj){var fn=this,args=arrSlice.call(arguments,1);return function(){fn.apply(thisObj,arrConcat.call(args,arrSlice.call(arguments)));};},defaultLocale,internals=objCreate(null),secret=Math.random(),dateWidths=objCreate(null,{narrow:{},short:{},long:{}}),numberFormatProtoInitialised=false,dateTimeFormatProtoInitialised=false,expInsertGroups=/(?=(?!^)(?:\d{3})+(?!\d))/g,expCurrencyCode=/^[A-Z]{3}$/,expUnicodeExSeq=/-u(?:-[0-9a-z]{2,8})+/gi,expBCP47Syntax,expExtSequences,expVariantDupes,expSingletonDupes,redundantTags={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97",'in':"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}},currencyMinorUnits={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:0,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};(function(){var
extlang='[a-z]{3}(?:-[a-z]{3}){0,2}',language='(?:[a-z]{2,3}(?:-'+ extlang+')?|[a-z]{4}|[a-z]{5,8})',script='[a-z]{4}',region='(?:[a-z]{2}|\\d{3})',variant='(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3})',singleton='[0-9a-wy-z]',extension=singleton+'(?:-[a-z0-9]{2,8})+',privateuse='x(?:-[a-z0-9]{1,8})+',irregular='(?:en-GB-oed'
+'|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)'
+'|sgn-(?:BE-FR|BE-NL|CH-DE))',regular='(?:art-lojban|cel-gaulish|no-bok|no-nyn'
+'|zh-(?:guoyu|hakka|min|min-nan|xiang))',grandfathered='(?:'+ irregular+'|'+ regular+')',langtag=language+'(?:-'+ script+')?(?:-'+ region+')?(?:-'
+ variant+')*(?:-'+ extension+')*(?:-'+ privateuse+')?';expBCP47Syntax=RegExp('^(?:'+langtag+'|'+privateuse+'|'+grandfathered+')$','i');expVariantDupes=RegExp('^(?!x).*?-('+variant+')-(?:\\w{4,8}-(?!x-))*\\1\\b','i');expSingletonDupes=RegExp('^(?!x).*?-('+singleton+')-(?:\\w+-(?!x-))*\\1\\b','i');expExtSequences=RegExp('-'+extension,'ig');})();function IsStructurallyValidLanguageTag(locale){if(!expBCP47Syntax.test(locale))
return false;if(expVariantDupes.test(locale))
return false;if(expSingletonDupes.test(locale))
return false;return true;}
function CanonicalizeLanguageTag(locale){var match,parts;locale=locale.toLowerCase();parts=locale.split('-');for(var i=1,max=parts.length;i<max;i++){if(parts[i].length===2)
parts[i]=parts[i].toUpperCase();else if(parts[i].length===4)
parts[i]=parts[i].charAt(0).toUpperCase()+ parts[i].slice(1);else if(parts[i].length===1&&parts[i]!='x')
break;}
locale=arrJoin.call(parts,'-');if((match=locale.match(expExtSequences))&&match.length>1){match.sort();locale=locale.replace(RegExp('(?:'+ expExtSequences.source+')+','i'),arrJoin.call(match,''));}
if(hop.call(redundantTags.tags,locale))
locale=redundantTags.tags[locale];parts=locale.split('-');for(var i=1,max=parts.length;i<max;i++){if(hop.call(redundantTags.subtags,parts[i]))
parts[i]=redundantTags.subtags[parts[i]];else if(hop.call(redundantTags.extLang,parts[i])){parts[i]=redundantTags.extLang[parts[i]][0];if(i===1&&redundantTags.extLang[parts[1]][1]===parts[0]){parts=arrSlice.call(parts,i++);max-=1;}}}
return arrJoin.call(parts,'-');}
function DefaultLocale(){return defaultLocale;}
function IsWellFormedCurrencyCode(currency){var
c=String(currency),normalized=toLatinUpperCase(c);if(expCurrencyCode.test(normalized)===false)
return false;return true;}
function CanonicalizeLocaleList(locales){if(locales===undefined)
return new List();var
seen=new List(),locales=typeof locales==='string'?[locales]:locales,O=toObject(locales),len=O.length,k=0;while(k<len){var
Pk=String(k),kPresent=Pk in O;if(kPresent){var
kValue=O[Pk];if(kValue==null||(typeof kValue!=='string'&&typeof kValue!=='object'))
throw new TypeError('String or Object type expected');var
tag=String(kValue);if(!IsStructurallyValidLanguageTag(tag))
throw new RangeError("'"+ tag+"' is not a structurally valid language tag");tag=CanonicalizeLanguageTag(tag);if(arrIndexOf.call(seen,tag)===-1)
arrPush.call(seen,tag);}
k++;}
return seen;}
function BestAvailableLocale(availableLocales,locale){var
candidate=locale;while(true){if(arrIndexOf.call(availableLocales,candidate)>-1)
return candidate;var
pos=candidate.lastIndexOf('-');if(pos<0)
return;if(pos>=2&&candidate.charAt(pos- 2)=='-')
pos-=2;candidate=candidate.substring(0,pos);}}
function LookupMatcher(availableLocales,requestedLocales){var
i=0,len=requestedLocales.length,availableLocale;while(i<len&&!availableLocale){var
locale=requestedLocales[i],noExtensionsLocale=String(locale).replace(expUnicodeExSeq,''),availableLocale=BestAvailableLocale(availableLocales,noExtensionsLocale);i++;}
var
result=new Record();if(availableLocale!==undefined){result['[[locale]]']=availableLocale;if(String(locale)!==String(noExtensionsLocale)){var
extension=locale.match(expUnicodeExSeq)[0],extensionIndex=locale.indexOf('-u-');result['[[extension]]']=extension;result['[[extensionIndex]]']=extensionIndex;}}
else
result['[[locale]]']=DefaultLocale();return result;}
function BestFitMatcher(availableLocales,requestedLocales){return LookupMatcher(availableLocales,requestedLocales);}
function ResolveLocale(availableLocales,requestedLocales,options,relevantExtensionKeys,localeData){if(availableLocales.length===0){throw new ReferenceError('No locale data has been provided for this object yet.');}
var
matcher=options['[[localeMatcher]]'];if(matcher==='lookup')
var
r=LookupMatcher(availableLocales,requestedLocales);else
var
r=BestFitMatcher(availableLocales,requestedLocales);var
foundLocale=r['[[locale]]'];if(hop.call(r,'[[extension]]'))
var
extension=r['[[extension]]'],extensionIndex=r['[[extensionIndex]]'],split=String.prototype.split,extensionSubtags=split.call(extension,'-'),extensionSubtagsLength=extensionSubtags.length;var
result=new Record();result['[[dataLocale]]']=foundLocale;var
supportedExtension='-u',i=0,len=relevantExtensionKeys.length;while(i<len){var
key=relevantExtensionKeys[i],foundLocaleData=localeData[foundLocale],keyLocaleData=foundLocaleData[key],value=keyLocaleData['0'],supportedExtensionAddition='',indexOf=arrIndexOf;if(extensionSubtags!==undefined){var
keyPos=indexOf.call(extensionSubtags,key);if(keyPos!==-1){if(keyPos+ 1<extensionSubtagsLength&&extensionSubtags[keyPos+ 1].length>2){var
requestedValue=extensionSubtags[keyPos+ 1],valuePos=indexOf.call(keyLocaleData,requestedValue);if(valuePos!==-1)
var
value=requestedValue,supportedExtensionAddition='-'+ key+'-'+ value;}
else{var
valuePos=indexOf(keyLocaleData,'true');if(valuePos!==-1)
var
value='true';}}}
if(hop.call(options,'[['+ key+']]')){var
optionsValue=options['[['+ key+']]'];if(indexOf.call(keyLocaleData,optionsValue)!==-1){if(optionsValue!==value){value=optionsValue;supportedExtensionAddition='';}}}
result['[['+ key+']]']=value;supportedExtension+=supportedExtensionAddition;i++;}
if(supportedExtension.length>2){var
preExtension=foundLocale.substring(0,extensionIndex),postExtension=foundLocale.substring(extensionIndex),foundLocale=preExtension+ supportedExtension+ postExtension;}
result['[[locale]]']=foundLocale;return result;}
function LookupSupportedLocales(availableLocales,requestedLocales){var
len=requestedLocales.length,subset=new List(),k=0;while(k<len){var
locale=requestedLocales[k],noExtensionsLocale=String(locale).replace(expUnicodeExSeq,''),availableLocale=BestAvailableLocale(availableLocales,noExtensionsLocale);if(availableLocale!==undefined)
arrPush.call(subset,locale);k++;}
var
subsetArray=arrSlice.call(subset);return subsetArray;}
function BestFitSupportedLocales(availableLocales,requestedLocales){return LookupSupportedLocales(availableLocales,requestedLocales);}
function SupportedLocales(availableLocales,requestedLocales,options){if(options!==undefined){var
options=new Record(toObject(options)),matcher=options.localeMatcher;if(matcher!==undefined){matcher=String(matcher);if(matcher!=='lookup'&&matcher!=='best fit')
throw new RangeError('matcher should be "lookup" or "best fit"');}}
if(matcher===undefined||matcher==='best fit')
var
subset=BestFitSupportedLocales(availableLocales,requestedLocales);else
var
subset=LookupSupportedLocales(availableLocales,requestedLocales);for(var P in subset){if(!hop.call(subset,P))
continue;defineProperty(subset,P,{writable:false,configurable:false,value:subset[P]});}
defineProperty(subset,'length',{writable:false});return subset;}
function GetOption(options,property,type,values,fallback){var
value=options[property];if(value!==undefined){value=type==='boolean'?Boolean(value):(type==='string'?String(value):value);if(values!==undefined){if(arrIndexOf.call(values,value)===-1)
throw new RangeError("'"+ value+"' is not an allowed value for `"+ property+'`');}
return value;}
return fallback;}
function GetNumberOption(options,property,minimum,maximum,fallback){var
value=options[property];if(value!==undefined){value=Number(value);if(isNaN(value)||value<minimum||value>maximum)
throw new RangeError('Value is not a number or outside accepted range');return Math.floor(value);}
return fallback;}
function NumberFormatConstructor(){var locales=arguments[0];var options=arguments[1];if(!this||this===Intl){return new Intl.NumberFormat(locales,options);}
return InitializeNumberFormat(toObject(this),locales,options);}
defineProperty(Intl,'NumberFormat',{configurable:true,writable:true,value:NumberFormatConstructor});defineProperty(Intl.NumberFormat,'prototype',{writable:false});function InitializeNumberFormat(numberFormat,locales,options){var
internal=getInternalProperties(numberFormat),regexpState=createRegExpRestore();if(internal['[[initializedIntlObject]]']===true)
throw new TypeError('`this` object has already been initialized as an Intl object');defineProperty(numberFormat,'__getInternalProperties',{value:function(){if(arguments[0]===secret)
return internal;}});internal['[[initializedIntlObject]]']=true;var
requestedLocales=CanonicalizeLocaleList(locales);if(options===undefined)
options={};else
options=toObject(options);var
opt=new Record(),matcher=GetOption(options,'localeMatcher','string',new List('lookup','best fit'),'best fit');opt['[[localeMatcher]]']=matcher;var
localeData=internals.NumberFormat['[[localeData]]'],r=ResolveLocale(internals.NumberFormat['[[availableLocales]]'],requestedLocales,opt,internals.NumberFormat['[[relevantExtensionKeys]]'],localeData);internal['[[locale]]']=r['[[locale]]'];internal['[[numberingSystem]]']=r['[[nu]]'];internal['[[dataLocale]]']=r['[[dataLocale]]'];var
dataLocale=r['[[dataLocale]]'],s=GetOption(options,'style','string',new List('decimal','percent','currency'),'decimal');internal['[[style]]']=s;var
c=GetOption(options,'currency','string');if(c!==undefined&&!IsWellFormedCurrencyCode(c))
throw new RangeError("'"+ c+"' is not a valid currency code");if(s==='currency'&&c===undefined)
throw new TypeError('Currency code is required when style is currency');if(s==='currency'){c=c.toUpperCase();internal['[[currency]]']=c;var
cDigits=CurrencyDigits(c);}
var
cd=GetOption(options,'currencyDisplay','string',new List('code','symbol','name'),'symbol');if(s==='currency')
internal['[[currencyDisplay]]']=cd;var
mnid=GetNumberOption(options,'minimumIntegerDigits',1,21,1);internal['[[minimumIntegerDigits]]']=mnid;var
mnfdDefault=s==='currency'?cDigits:0,mnfd=GetNumberOption(options,'minimumFractionDigits',0,20,mnfdDefault);internal['[[minimumFractionDigits]]']=mnfd;var
mxfdDefault=s==='currency'?Math.max(mnfd,cDigits):(s==='percent'?Math.max(mnfd,0):Math.max(mnfd,3)),mxfd=GetNumberOption(options,'maximumFractionDigits',mnfd,20,mxfdDefault);internal['[[maximumFractionDigits]]']=mxfd;var
mnsd=options.minimumSignificantDigits,mxsd=options.maximumSignificantDigits;if(mnsd!==undefined||mxsd!==undefined){mnsd=GetNumberOption(options,'minimumSignificantDigits',1,21,1);mxsd=GetNumberOption(options,'maximumSignificantDigits',mnsd,21,21);internal['[[minimumSignificantDigits]]']=mnsd;internal['[[maximumSignificantDigits]]']=mxsd;}
var
g=GetOption(options,'useGrouping','boolean',undefined,true);internal['[[useGrouping]]']=g;var
dataLocaleData=localeData[dataLocale],patterns=dataLocaleData.patterns;var
stylePatterns=patterns[s];internal['[[positivePattern]]']=stylePatterns.positivePattern;internal['[[negativePattern]]']=stylePatterns.negativePattern;internal['[[boundFormat]]']=undefined;internal['[[initializedNumberFormat]]']=true;regexpState.exp.test(regexpState.input);return numberFormat;}
function CurrencyDigits(currency){return currencyMinorUnits[currency]!==undefined?currencyMinorUnits[currency]:2;}
internals.NumberFormat={'[[availableLocales]]':[],'[[relevantExtensionKeys]]':['nu'],'[[localeData]]':{}};defineProperty(Intl.NumberFormat,'supportedLocalesOf',{configurable:true,writable:true,value:fnBind.call(supportedLocalesOf,internals.NumberFormat)});defineProperty(Intl.NumberFormat.prototype,'format',{configurable:true,get:function(){var internal=this!=null&&typeof this==='object'&&getInternalProperties(this);if(!internal||!internal['[[initializedNumberFormat]]'])
throw new TypeError('`this` value for format() is not an initialized Intl.NumberFormat object.');if(internal['[[boundFormat]]']===undefined){var
F=function(value){return FormatNumber(this,Number(value));},bf=fnBind.call(F,this);internal['[[boundFormat]]']=bf;}
return internal['[[boundFormat]]'];}});function FormatNumber(numberFormat,x){var n,regexpState=createRegExpRestore(),internal=getInternalProperties(numberFormat),locale=internal['[[dataLocale]]'],nums=internal['[[numberingSystem]]'],data=internals.NumberFormat['[[localeData]]'][locale],ild=data.symbols[nums]||data.symbols.latn,negative=false;if(isFinite(x)===false){if(isNaN(x))
n=ild.nan;else{n=ild.infinity;if(x<0)
negative=true;}}
else{if(x<0){negative=true;x=-x;}
if(internal['[[style]]']==='percent')
x*=100;if(hop.call(internal,'[[minimumSignificantDigits]]')&&hop.call(internal,'[[maximumSignificantDigits]]'))
n=ToRawPrecision(x,internal['[[minimumSignificantDigits]]'],internal['[[maximumSignificantDigits]]']);else
n=ToRawFixed(x,internal['[[minimumIntegerDigits]]'],internal['[[minimumFractionDigits]]'],internal['[[maximumFractionDigits]]']);if(numSys[nums]){var digits=numSys[internal['[[numberingSystem]]']];n=String(n).replace(/\d/g,function(digit){return digits[digit];});}
else
n=String(n);n=n.replace(/\./g,ild.decimal);if(internal['[[useGrouping]]']===true){var parts=n.split(ild.decimal);parts[0]=parts[0].replace(expInsertGroups,ild.group);n=arrJoin.call(parts,ild.decimal);}}
var
result=internal[negative===true?'[[negativePattern]]':'[[positivePattern]]'];result=result.replace('{number}',n);if(internal['[[style]]']==='currency'){var cd,currency=internal['[[currency]]'],cData=data.currencies[currency];if(internal['[[currencyDisplay]]']==='code')
cd=currency;else if(internal['[[currencyDisplay]]']==='symbol')
cd=cData||currency;else if(internal['[[currencyDisplay]]']==='name')
cd=cData?cData['displayName-count-one']:currency;result=result.replace('{currency}',cd);}
regexpState.exp.test(regexpState.input);return result;}
function ToRawPrecision(x,minPrecision,maxPrecision){var
p=maxPrecision;if(x===0){var
m=arrJoin.call(Array(p+ 1),'0'),e=0;}
else{var idx,isInt=x%1,pre=isInt?Math.pow(10,maxPrecision):1,m=Number.prototype.toPrecision.call(x*pre,maxPrecision),e=(idx=m.indexOf('e'))>-1?Number(m.slice(idx+ 1)):((idx=m.indexOf('.'))>-1?idx- 1:m.length- 1);if(isInt)
e-=maxPrecision;m=m.slice(0,m.indexOf('e')>-1?idx:m.length).replace('.','');}
if(e>=p)
return m+ arrJoin.call(Array(e-p+1+ 1),'0');else if(e===p- 1)
return m;else if(e>=0)
m=m.slice(0,e+ 1)+'.'+ m.slice(e+ 1);else if(e<0)
m='0.'+ arrJoin.call(Array(-(e+1)+ 1),'0')+ m;if(m.indexOf(".")>=0&&maxPrecision>minPrecision){var
cut=maxPrecision- minPrecision;while(cut>0&&m.charAt(m.length-1)==='0'){m=m.slice(0,-1);cut--;}
if(m.charAt(m.length-1)==='.')
m=m.slice(0,-1);}
return m;}
function ToRawFixed(x,minInteger,minFraction,maxFraction){var idx,m=Number.prototype.toFixed.call(x,maxFraction),igr=m.split(".")[0].length,cut=maxFraction- minFraction,exp=(idx=m.indexOf('e'))>-1?m.slice(idx+ 1):0;if(exp){m=m.slice(0,idx).replace('.','');m+=arrJoin.call(Array(exp-(m.length- 1)+ 1),'0')
+'.'+ arrJoin.call(Array(maxFraction+ 1),'0');igr=m.length;}
while(cut>0&&m.slice(-1)==="0"){m=m.slice(0,-1);cut--;}
if(m.slice(-1)===".")
m=m.slice(0,-1);if(igr<minInteger)
var z=arrJoin.call(Array(minInteger- igr+ 1),'0');return(z?z:'')+ m;}
var numSys={arab:['\u0660','\u0661','\u0662','\u0663','\u0664','\u0665','\u0666','\u0667','\u0668','\u0669'],arabext:['\u06F0','\u06F1','\u06F2','\u06F3','\u06F4','\u06F5','\u06F6','\u06F7','\u06F8','\u06F9'],bali:['\u1B50','\u1B51','\u1B52','\u1B53','\u1B54','\u1B55','\u1B56','\u1B57','\u1B58','\u1B59'],beng:['\u09E6','\u09E7','\u09E8','\u09E9','\u09EA','\u09EB','\u09EC','\u09ED','\u09EE','\u09EF'],deva:['\u0966','\u0967','\u0968','\u0969','\u096A','\u096B','\u096C','\u096D','\u096E','\u096F'],fullwide:['\uFF10','\uFF11','\uFF12','\uFF13','\uFF14','\uFF15','\uFF16','\uFF17','\uFF18','\uFF19'],gujr:['\u0AE6','\u0AE7','\u0AE8','\u0AE9','\u0AEA','\u0AEB','\u0AEC','\u0AED','\u0AEE','\u0AEF'],guru:['\u0A66','\u0A67','\u0A68','\u0A69','\u0A6A','\u0A6B','\u0A6C','\u0A6D','\u0A6E','\u0A6F'],hanidec:['\u3007','\u4E00','\u4E8C','\u4E09','\u56DB','\u4E94','\u516D','\u4E03','\u516B','\u4E5D'],khmr:['\u17E0','\u17E1','\u17E2','\u17E3','\u17E4','\u17E5','\u17E6','\u17E7','\u17E8','\u17E9'],knda:['\u0CE6','\u0CE7','\u0CE8','\u0CE9','\u0CEA','\u0CEB','\u0CEC','\u0CED','\u0CEE','\u0CEF'],laoo:['\u0ED0','\u0ED1','\u0ED2','\u0ED3','\u0ED4','\u0ED5','\u0ED6','\u0ED7','\u0ED8','\u0ED9'],latn:['\u0030','\u0031','\u0032','\u0033','\u0034','\u0035','\u0036','\u0037','\u0038','\u0039'],limb:['\u1946','\u1947','\u1948','\u1949','\u194A','\u194B','\u194C','\u194D','\u194E','\u194F'],mlym:['\u0D66','\u0D67','\u0D68','\u0D69','\u0D6A','\u0D6B','\u0D6C','\u0D6D','\u0D6E','\u0D6F'],mong:['\u1810','\u1811','\u1812','\u1813','\u1814','\u1815','\u1816','\u1817','\u1818','\u1819'],mymr:['\u1040','\u1041','\u1042','\u1043','\u1044','\u1045','\u1046','\u1047','\u1048','\u1049'],orya:['\u0B66','\u0B67','\u0B68','\u0B69','\u0B6A','\u0B6B','\u0B6C','\u0B6D','\u0B6E','\u0B6F'],tamldec:['\u0BE6','\u0BE7','\u0BE8','\u0BE9','\u0BEA','\u0BEB','\u0BEC','\u0BED','\u0BEE','\u0BEF'],telu:['\u0C66','\u0C67','\u0C68','\u0C69','\u0C6A','\u0C6B','\u0C6C','\u0C6D','\u0C6E','\u0C6F'],thai:['\u0E50','\u0E51','\u0E52','\u0E53','\u0E54','\u0E55','\u0E56','\u0E57','\u0E58','\u0E59'],tibt:['\u0F20','\u0F21','\u0F22','\u0F23','\u0F24','\u0F25','\u0F26','\u0F27','\u0F28','\u0F29']};defineProperty(Intl.NumberFormat.prototype,'resolvedOptions',{configurable:true,writable:true,value:function(){var prop,descs=new Record(),props=['locale','numberingSystem','style','currency','currencyDisplay','minimumIntegerDigits','minimumFractionDigits','maximumFractionDigits','minimumSignificantDigits','maximumSignificantDigits','useGrouping'],internal=this!=null&&typeof this==='object'&&getInternalProperties(this);if(!internal||!internal['[[initializedNumberFormat]]'])
throw new TypeError('`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.');for(var i=0,max=props.length;i<max;i++){if(hop.call(internal,prop='[['+ props[i]+']]'))
descs[props[i]]={value:internal[prop],writable:true,configurable:true,enumerable:true};}
return objCreate({},descs);}});function DateTimeFormatConstructor(){var locales=arguments[0];var options=arguments[1];if(!this||this===Intl){return new Intl.DateTimeFormat(locales,options);}
return InitializeDateTimeFormat(toObject(this),locales,options);}
defineProperty(Intl,'DateTimeFormat',{configurable:true,writable:true,value:DateTimeFormatConstructor});defineProperty(DateTimeFormatConstructor,'prototype',{writable:false});function InitializeDateTimeFormat(dateTimeFormat,locales,options){var
internal=getInternalProperties(dateTimeFormat),regexpState=createRegExpRestore();if(internal['[[initializedIntlObject]]']===true)
throw new TypeError('`this` object has already been initialized as an Intl object');defineProperty(dateTimeFormat,'__getInternalProperties',{value:function(){if(arguments[0]===secret)
return internal;}});internal['[[initializedIntlObject]]']=true;var
requestedLocales=CanonicalizeLocaleList(locales),options=ToDateTimeOptions(options,'any','date'),opt=new Record(),matcher=GetOption(options,'localeMatcher','string',new List('lookup','best fit'),'best fit');opt['[[localeMatcher]]']=matcher;var
DateTimeFormat=internals.DateTimeFormat,localeData=DateTimeFormat['[[localeData]]'],r=ResolveLocale(DateTimeFormat['[[availableLocales]]'],requestedLocales,opt,DateTimeFormat['[[relevantExtensionKeys]]'],localeData);internal['[[locale]]']=r['[[locale]]'];internal['[[calendar]]']=r['[[ca]]'];internal['[[numberingSystem]]']=r['[[nu]]'];internal['[[dataLocale]]']=r['[[dataLocale]]'];var
dataLocale=r['[[dataLocale]]'],tz=options.timeZone;if(tz!==undefined){tz=toLatinUpperCase(tz);if(tz!=='UTC')
throw new RangeError('timeZone is not supported.');}
internal['[[timeZone]]']=tz;opt=new Record();for(var prop in dateTimeComponents){if(!hop.call(dateTimeComponents,prop))
continue;var
value=GetOption(options,prop,'string',dateTimeComponents[prop]);opt['[['+prop+']]']=value;}
var
bestFormat,dataLocaleData=localeData[dataLocale],formats=dataLocaleData.formats,matcher=GetOption(options,'formatMatcher','string',new List('basic','best fit'),'best fit');if(matcher==='basic')
bestFormat=BasicFormatMatcher(opt,formats);else
bestFormat=BestFitFormatMatcher(opt,formats);for(var prop in dateTimeComponents){if(!hop.call(dateTimeComponents,prop))
continue;if(hop.call(bestFormat,prop)){var
p=bestFormat[prop];internal['[['+prop+']]']=p;}}
var
pattern,hr12=GetOption(options,'hour12','boolean');if(internal['[[hour]]']){hr12=hr12===undefined?dataLocaleData.hour12:hr12;internal['[[hour12]]']=hr12;if(hr12===true){var
hourNo0=dataLocaleData.hourNo0;internal['[[hourNo0]]']=hourNo0;pattern=bestFormat.pattern12;}
else
pattern=bestFormat.pattern;}
else
pattern=bestFormat.pattern;internal['[[pattern]]']=pattern;internal['[[boundFormat]]']=undefined;internal['[[initializedDateTimeFormat]]']=true;regexpState.exp.test(regexpState.input);return dateTimeFormat;}
var dateTimeComponents={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};function ToDateTimeOptions(options,required,defaults){options=options===undefined?null:new Record(toObject(options));var
create=objCreate,options=create(options),needDefaults=true;if(required==='date'||required==='any'){if(options.weekday!==undefined||options.year!==undefined||options.month!==undefined||options.day!==undefined)
needDefaults=false;}
if(required==='time'||required==='any'){if(options.hour!==undefined||options.minute!==undefined||options.second!==undefined)
needDefaults=false;}
if(needDefaults&&(defaults==='date'||defaults==='all'))
options.year=options.month=options.day='numeric';if(needDefaults&&(defaults==='time'||defaults==='all'))
options.hour=options.minute=options.second='numeric';return options;}
function BasicFormatMatcher(options,formats){var
removalPenalty=120,additionPenalty=20,longLessPenalty=8,longMorePenalty=6,shortLessPenalty=6,shortMorePenalty=3,bestScore=-Infinity,bestFormat,i=0,len=formats.length;while(i<len){var
format=formats[i],score=0;for(var property in dateTimeComponents){if(!hop.call(dateTimeComponents,property))
continue;var
optionsProp=options['[['+ property+']]'],formatProp=hop.call(format,property)?format[property]:undefined;if(optionsProp===undefined&&formatProp!==undefined)
score-=additionPenalty;else if(optionsProp!==undefined&&formatProp===undefined)
score-=removalPenalty;else{var
values=['2-digit','numeric','narrow','short','long'],optionsPropIndex=arrIndexOf.call(values,optionsProp),formatPropIndex=arrIndexOf.call(values,formatProp),delta=Math.max(Math.min(formatPropIndex- optionsPropIndex,2),-2);if(delta===2)
score-=longMorePenalty;else if(delta===1)
score-=shortMorePenalty;else if(delta===-1)
score-=shortLessPenalty;else if(delta===-2)
score-=longLessPenalty;}}
if(score>bestScore){bestScore=score;bestFormat=format;}
i++;}
return bestFormat;}
function BestFitFormatMatcher(options,formats){return BasicFormatMatcher(options,formats);}
internals.DateTimeFormat={'[[availableLocales]]':[],'[[relevantExtensionKeys]]':['ca','nu'],'[[localeData]]':{}};defineProperty(Intl.DateTimeFormat,'supportedLocalesOf',{configurable:true,writable:true,value:fnBind.call(supportedLocalesOf,internals.DateTimeFormat)});defineProperty(Intl.DateTimeFormat.prototype,'format',{configurable:true,get:function(){var internal=this!=null&&typeof this==='object'&&getInternalProperties(this);if(!internal||!internal['[[initializedDateTimeFormat]]'])
throw new TypeError('`this` value for format() is not an initialized Intl.DateTimeFormat object.');if(internal['[[boundFormat]]']===undefined){var
F=function(){var x=Number(arguments.length===0?Date.now():arguments[0]);return FormatDateTime(this,x);},bf=fnBind.call(F,this);internal['[[boundFormat]]']=bf;}
return internal['[[boundFormat]]'];}});function FormatDateTime(dateTimeFormat,x){if(!isFinite(x))
throw new RangeError('Invalid valid date passed to format');var
internal=dateTimeFormat.__getInternalProperties(secret),regexpState=createRegExpRestore(),locale=internal['[[locale]]'],nf=new Intl.NumberFormat([locale],{useGrouping:false}),nf2=new Intl.NumberFormat([locale],{minimumIntegerDigits:2,useGrouping:false}),tm=ToLocalTime(x,internal['[[calendar]]'],internal['[[timeZone]]']),result=internal['[[pattern]]'],dataLocale=internal['[[dataLocale]]'],localeData=internals.DateTimeFormat['[[localeData]]'][dataLocale].calendars,ca=internal['[[calendar]]'];for(var p in dateTimeComponents){if(hop.call(internal,'[['+ p+']]')){var
pm,fv,f=internal['[['+ p+']]'],v=tm['[['+ p+']]'];if(p==='year'&&v<=0)
v=1- v;else if(p==='month')
v++;else if(p==='hour'&&internal['[[hour12]]']===true){v=v%12;pm=v!==tm['[['+ p+']]'];if(v===0&&internal['[[hourNo0]]']===true)
v=12;}
if(f==='numeric')
fv=FormatNumber(nf,v);else if(f==='2-digit'){fv=FormatNumber(nf2,v);if(fv.length>2)
fv=fv.slice(-2);}
else if(f in dateWidths){switch(p){case'month':fv=resolveDateString(localeData,ca,'months',f,tm['[['+ p+']]']);break;case'weekday':try{fv=resolveDateString(localeData,ca,'days',f,tm['[['+ p+']]']);}catch(e){throw new Error('Could not find weekday data for locale '+locale);}
break;case'timeZoneName':fv='';break;default:fv=tm['[['+ p+']]'];}}
result=result.replace('{'+ p+'}',fv);}}
if(internal['[[hour12]]']===true){fv=resolveDateString(localeData,ca,'dayPeriods',pm?'pm':'am');result=result.replace('{ampm}',fv);}
regexpState.exp.test(regexpState.input);return result;}
function ToLocalTime(date,calendar,timeZone){var d=new Date(date);return new Record({'[[weekday]]':d.getDay(),'[[era]]':+(d.getFullYear>=0),'[[year]]':d.getFullYear(),'[[month]]':d.getMonth(),'[[day]]':d.getDate(),'[[hour]]':d.getHours(),'[[minute]]':d.getMinutes(),'[[second]]':d.getSeconds(),'[[inDST]]':false});}
defineProperty(Intl.DateTimeFormat.prototype,'resolvedOptions',{writable:true,configurable:true,value:function(){var prop,descs=new Record(),props=['locale','calendar','numberingSystem','timeZone','hour12','weekday','era','year','month','day','hour','minute','second','timeZoneName','pattern'],internal=this!=null&&typeof this==='object'&&getInternalProperties(this);if(!internal||!internal['[[initializedDateTimeFormat]]'])
throw new TypeError('`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.');for(var i=0,max=props.length;i<max;i++){if(hop.call(internal,prop='[['+ props[i]+']]'))
descs[props[i]]={value:internal[prop],writable:true,configurable:true,enumerable:true};}
return objCreate({},descs);}});defineProperty(Number.prototype,'toLocaleString',{writable:true,configurable:true,value:function(){if(Object.prototype.toString.call(this)!=='[object Number]')
throw new TypeError('`this` value must be a number for Number.prototype.toLocaleString()');return FormatNumber(new NumberFormatConstructor(arguments[0],arguments[1]),this);}});defineProperty(Date.prototype,'toLocaleString',{writable:true,configurable:true,value:function(){if(Object.prototype.toString.call(this)!=='[object Date]')
throw new TypeError('`this` value must be a Date instance for Date.prototype.toLocaleString()');var
x=+this;if(isNaN(x))
return'Invalid Date';var
locales=arguments[0],options=arguments[1],options=ToDateTimeOptions(options,'any','all'),dateTimeFormat=new DateTimeFormatConstructor(locales,options);return FormatDateTime(dateTimeFormat,x);}});defineProperty(Date.prototype,'toLocaleDateString',{writable:true,configurable:true,value:function(){if(Object.prototype.toString.call(this)!=='[object Date]')
throw new TypeError('`this` value must be a Date instance for Date.prototype.toLocaleDateString()');var
x=+this;if(isNaN(x))
return'Invalid Date';var
locales=arguments[0],options=arguments[1],options=ToDateTimeOptions(options,'date','date'),dateTimeFormat=new DateTimeFormatConstructor(locales,options);return FormatDateTime(dateTimeFormat,x);}});defineProperty(Date.prototype,'toLocaleTimeString',{writable:true,configurable:true,value:function(){if(Object.prototype.toString.call(this)!=='[object Date]')
throw new TypeError('`this` value must be a Date instance for Date.prototype.toLocaleTimeString()');var
x=+this;if(isNaN(x))
return'Invalid Date';var
locales=arguments[0],options=arguments[1],options=ToDateTimeOptions(options,'time','time'),dateTimeFormat=new DateTimeFormatConstructor(locales,options);return FormatDateTime(dateTimeFormat,x);}});defineProperty(Intl,'__addLocaleData',{value:addLocaleData});function addLocaleData(data){if(!IsStructurallyValidLanguageTag(data.locale))
throw new Error("Object passed doesn't identify itself with a valid language tag");if(!data.number)
throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var locale,locales=[data.locale],parts=data.locale.split('-');if(parts.length>2&&parts[1].length==4)
arrPush.call(locales,parts[0]+'-'+ parts[2]);while(locale=arrShift.call(locales)){arrPush.call(internals.NumberFormat['[[availableLocales]]'],locale);internals.NumberFormat['[[localeData]]'][locale]=data.number;if(data.date){data.date.nu=data.number.nu;arrPush.call(internals.DateTimeFormat['[[availableLocales]]'],locale);internals.DateTimeFormat['[[localeData]]'][locale]=data.date;}}
if(defaultLocale===undefined)
defaultLocale=data.locale;if(!numberFormatProtoInitialised){InitializeNumberFormat(Intl.NumberFormat.prototype);numberFormatProtoInitialised=true;}
if(data.date&&!dateTimeFormatProtoInitialised){InitializeDateTimeFormat(Intl.DateTimeFormat.prototype);dateTimeFormatProtoInitialised=true;}}
if(typeof window!=='undefined')
window.IntlLocaleData=internals;function supportedLocalesOf(locales){if(!hop.call(this,'[[availableLocales]]'))
throw new TypeError('supportedLocalesOf() is not a constructor');var
regexpState=createRegExpRestore(),options=arguments[1],availableLocales=this['[[availableLocales]]'],requestedLocales=CanonicalizeLocaleList(locales);regexpState.exp.test(regexpState.input);return SupportedLocales(availableLocales,requestedLocales,options);}
function resolveDateString(data,ca,component,width,key){var obj=data[ca]&&data[ca][component]?data[ca][component]:data.gregory[component],alts={narrow:['short','long'],short:['long','narrow'],long:['short','narrow']},resolved=hop.call(obj,width)?obj[width]:hop.call(obj,alts[width][0])?obj[alts[width][0]]:obj[alts[width][1]];return key!=null?resolved[key]:resolved;}
Record.prototype=objCreate(null);function Record(obj){for(var k in obj){if(obj instanceof Record||hop.call(obj,k))
defineProperty(this,k,{value:obj[k],enumerable:true,writable:true,configurable:true});}}
List.prototype=objCreate(null);function List(){defineProperty(this,'length',{writable:true,value:0});if(arguments.length)
arrPush.apply(this,arrSlice.call(arguments));}
function createRegExpRestore(){var lm=RegExp.lastMatch,ret={input:RegExp.input},esc=/[.?*+^$[\]\\(){}|-]/g,reg=new List(),cap={};if(lm==')')lm="\\)";for(var i=1;i<=9;i++)
cap['$'+i]=RegExp['$'+i];for(var i=1;i<=9;i++){var m=cap['$'+i];if(!m)
lm='()'+ lm;else
lm=lm.replace(m,'('+ m.replace(esc,'\\$0')+')');arrPush.call(reg,lm.slice(0,lm.indexOf('(')+ 1));lm=lm.slice(lm.indexOf('(')+ 1);}
ret.exp=new RegExp(arrJoin.call(reg,'')+ lm,RegExp.multiline?'m':'');return ret;}
function toLatinUpperCase(str){var i=str.length;while(i--){var ch=str.charAt(i);if(ch>="a"&&ch<="z")
str=str.slice(0,i)+ ch.toUpperCase()+ str.slice(i+1);}
return str;}
function toObject(arg){if(arg==null)
throw new TypeError('Cannot convert null or undefined to object');return Object(arg);}
function getInternalProperties(obj){if(hop.call(obj,'__getInternalProperties'))
return obj.__getInternalProperties(secret);else
return objCreate(null);}
return Intl;})({});(function(){"use strict";var root=this;var timezoneJS;if(typeof exports!=='undefined'){timezoneJS=exports;}else{timezoneJS={};}
_exports.timezoneJS=timezoneJS;timezoneJS.VERSION='0.4.4';var $=root.$||root.jQuery||root.Zepto,fleegix=root.fleegix,DAYS=timezoneJS.Days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],MONTHS=timezoneJS.Months=['January','February','March','April','May','June','July','August','September','October','November','December'],SHORT_MONTHS={},SHORT_DAYS={},EXACT_DATE_TIME={};for(var i=0;i<MONTHS.length;i++){SHORT_MONTHS[MONTHS[i].substr(0,3)]=i;}
for(i=0;i<DAYS.length;i++){SHORT_DAYS[DAYS[i].substr(0,3)]=i;}
var _arrIndexOf=Array.prototype.indexOf||function(el){if(this===null){throw new TypeError();}
var t=Object(this);var len=t.length>>>0;if(len===0){return-1;}
var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0;}else if(n!==0&&n!==Infinity&&n!==-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}
if(n>=len){return-1;}
var k=n>=0?n:Math.max(len- Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===el){return k;}}
return-1;};var _fixWidth=function(number,digits){if(typeof number!=="number"){throw"not a number: "+ number;}
var s=number.toString();if(number.length>digits){return number.substr(number.length- digits,number.length);}
while(s.length<digits){s='0'+ s;}
return s;};var _transport=function(opts){if((!fleegix||typeof fleegix.xhr==='undefined')&&(!jQuery||typeof jQuery.ajax==='undefined')){throw new Error('Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.');}
if(!opts)return;if(!opts.url)throw new Error('URL must be specified');if(!('async'in opts))opts.async=true;if(!opts.async){return fleegix&&fleegix.xhr?fleegix.xhr.doReq({url:opts.url,async:false}):jQuery.ajax({url:opts.url,async:false,dataType:'text'}).responseText;}
return fleegix&&fleegix.xhr?fleegix.xhr.send({url:opts.url,method:'get',handleSuccess:opts.success,handleErr:opts.error}):jQuery.ajax({url:opts.url,dataType:'text',method:'GET',error:opts.error,success:opts.success});};timezoneJS.ruleCache={};timezoneJS.Date=function(){var args=Array.prototype.slice.apply(arguments),dt=null,tz=null,arr=[];if(Object.prototype.toString.call(args[0])==='[object Array]'){args=args[0];}
if(typeof args[args.length- 1]==='string'&&isNaN(Date.parse(args[args.length- 1].replace(/GMT\+\d+/,'')))){tz=args.pop();}
var is_dt_local=false;switch(args.length){case 0:dt=new Date();break;case 1:dt=new Date(args[0]);if(typeof args[0]=='string'&&args[0].search(/[+-][0-9]{4}/)==-1&&args[0].search(/Z/)==-1&&args[0].search(/T/)==-1){is_dt_local=true;}
break;default:for(var i=0;i<7;i++){arr[i]=args[i]||0;}
dt=new Date(arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6]);is_dt_local=true;break;}
this._useCache=false;this._tzInfo={};this._day=0;this.year=0;this.month=0;this.date=0;this.hours=0;this.minutes=0;this.seconds=0;this.milliseconds=0;this.timezone=tz||null;if(is_dt_local){this.setFromDateObjProxy(dt);}else{this.setFromTimeProxy(dt.getTime(),tz);}};timezoneJS.Date.prototype={getDate:function(){return this.date;},getDay:function(){return this._day;},getFullYear:function(){return this.year;},getMonth:function(){return this.month;},getYear:function(){return this.year- 1900;},getHours:function(){return this.hours;},getMilliseconds:function(){return this.milliseconds;},getMinutes:function(){return this.minutes;},getSeconds:function(){return this.seconds;},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate();},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay();},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear();},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours();},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds();},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes();},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth();},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds();},getTime:function(){return this._timeProxy+(this.getTimezoneOffset()*60*1000);},getTimezone:function(){return this.timezone;},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset;},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr;},getTimezoneInfo:function(){if(this._useCache)return this._tzInfo;var res;if(this.timezone){res=this.timezone==='Etc/UTC'||this.timezone==='Etc/GMT'?{tzOffset:0,tzAbbr:'UTC'}:timezoneJS.timezone.getTzInfo(this._timeProxy,this.timezone);}
else{res={tzOffset:this.getLocalOffset(),tzAbbr:null};}
this._tzInfo=res;this._useCache=true;return res;},getUTCDateProxy:function(){var dt=new Date(this._timeProxy);dt.setUTCMinutes(dt.getUTCMinutes()+ this.getTimezoneOffset());return dt;},setDate:function(date){this.setAttribute('date',date);return this.getTime();},setFullYear:function(year,month,date){if(date!==undefined){this.setAttribute('date',1);}
this.setAttribute('year',year);if(month!==undefined){this.setAttribute('month',month);}
if(date!==undefined){this.setAttribute('date',date);}
return this.getTime();},setMonth:function(month,date){this.setAttribute('month',month);if(date!==undefined){this.setAttribute('date',date);}
return this.getTime();},setYear:function(year){year=Number(year);if(0<=year&&year<=99){year+=1900;}
this.setUTCAttribute('year',year);return this.getTime();},setHours:function(hours,minutes,seconds,milliseconds){this.setAttribute('hours',hours);if(minutes!==undefined){this.setAttribute('minutes',minutes);}
if(seconds!==undefined){this.setAttribute('seconds',seconds);}
if(milliseconds!==undefined){this.setAttribute('milliseconds',milliseconds);}
return this.getTime();},setMinutes:function(minutes,seconds,milliseconds){this.setAttribute('minutes',minutes);if(seconds!==undefined){this.setAttribute('seconds',seconds);}
if(milliseconds!==undefined){this.setAttribute('milliseconds',milliseconds);}
return this.getTime();},setSeconds:function(seconds,milliseconds){this.setAttribute('seconds',seconds);if(milliseconds!==undefined){this.setAttribute('milliseconds',milliseconds);}
return this.getTime();},setMilliseconds:function(milliseconds){this.setAttribute('milliseconds',milliseconds);return this.getTime();},setTime:function(n){if(isNaN(n)){throw new Error('Units must be a number.');}
this.setFromTimeProxy(n,this.timezone);return this.getTime();},setUTCFullYear:function(year,month,date){if(date!==undefined){this.setUTCAttribute('date',1);}
this.setUTCAttribute('year',year);if(month!==undefined){this.setUTCAttribute('month',month);}
if(date!==undefined){this.setUTCAttribute('date',date);}
return this.getTime();},setUTCMonth:function(month,date){this.setUTCAttribute('month',month);if(date!==undefined){this.setUTCAttribute('date',date);}
return this.getTime();},setUTCDate:function(date){this.setUTCAttribute('date',date);return this.getTime();},setUTCHours:function(hours,minutes,seconds,milliseconds){this.setUTCAttribute('hours',hours);if(minutes!==undefined){this.setUTCAttribute('minutes',minutes);}
if(seconds!==undefined){this.setUTCAttribute('seconds',seconds);}
if(milliseconds!==undefined){this.setUTCAttribute('milliseconds',milliseconds);}
return this.getTime();},setUTCMinutes:function(minutes,seconds,milliseconds){this.setUTCAttribute('minutes',minutes);if(seconds!==undefined){this.setUTCAttribute('seconds',seconds);}
if(milliseconds!==undefined){this.setUTCAttribute('milliseconds',milliseconds);}
return this.getTime();},setUTCSeconds:function(seconds,milliseconds){this.setUTCAttribute('seconds',seconds);if(milliseconds!==undefined){this.setUTCAttribute('milliseconds',milliseconds);}
return this.getTime();},setUTCMilliseconds:function(milliseconds){this.setUTCAttribute('milliseconds',milliseconds);return this.getTime();},setFromDateObjProxy:function(dt){this.year=dt.getFullYear();this.month=dt.getMonth();this.date=dt.getDate();this.hours=dt.getHours();this.minutes=dt.getMinutes();this.seconds=dt.getSeconds();this.milliseconds=dt.getMilliseconds();this._day=dt.getDay();this._dateProxy=dt;this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds);this._useCache=false;},setFromTimeProxy:function(utcMillis,tz){var dt=new Date(utcMillis);var tzOffset=tz?timezoneJS.timezone.getTzInfo(utcMillis,tz,true).tzOffset:dt.getTimezoneOffset();dt.setTime(utcMillis+(dt.getTimezoneOffset()- tzOffset)*60000);this.setFromDateObjProxy(dt);},setAttribute:function(unit,n){if(isNaN(n)){throw new Error('Units must be a number.');}
var dt=this._dateProxy;var meth=unit==='year'?'FullYear':unit.substr(0,1).toUpperCase()+ unit.substr(1);dt['set'+ meth](n);this.setFromDateObjProxy(dt);},setUTCAttribute:function(unit,n){if(isNaN(n)){throw new Error('Units must be a number.');}
var meth=unit==='year'?'FullYear':unit.substr(0,1).toUpperCase()+ unit.substr(1);var dt=this.getUTCDateProxy();dt['setUTC'+ meth](n);dt.setUTCMinutes(dt.getUTCMinutes()- this.getTimezoneOffset());this.setFromTimeProxy(dt.getTime()+ this.getTimezoneOffset()*60000,this.timezone);},setTimezone:function(tz){var previousOffset=this.getTimezoneInfo().tzOffset;this.timezone=tz;this._useCache=false;this.setUTCMinutes(this.getUTCMinutes()- this.getTimezoneInfo().tzOffset+ previousOffset);},removeTimezone:function(){this.timezone=null;this._useCache=false;},valueOf:function(){return this.getTime();},clone:function(){return this.timezone?new timezoneJS.Date(this.getTime(),this.timezone):new timezoneJS.Date(this.getTime());},toGMTString:function(){return this.toString('EEE, dd MMM yyyy HH:mm:ss Z','Etc/GMT');},toLocaleString:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){return this.toString('yyyy-MM-ddTHH:mm:ss.SSS','Etc/UTC')+'Z';},toJSON:function(){return this.toISOString();},toString:function(format,tz){if(!format)format='yyyy-MM-dd HH:mm:ss';var result=format;var tzInfo=tz?timezoneJS.timezone.getTzInfo(this.getTime(),tz):this.getTimezoneInfo();var _this=this;if(tz){_this=this.clone();_this.setTimezone(tz);}
var hours=_this.getHours();return result.replace(/a+/g,function(){return'k';}).replace(/y+/g,function(token){return _fixWidth(_this.getFullYear(),token.length);}).replace(/d+/g,function(token){return _fixWidth(_this.getDate(),token.length);}).replace(/m+/g,function(token){return _fixWidth(_this.getMinutes(),token.length);}).replace(/s+/g,function(token){return _fixWidth(_this.getSeconds(),token.length);}).replace(/S+/g,function(token){return _fixWidth(_this.getMilliseconds(),token.length);}).replace(/h+/g,function(token){return _fixWidth(((hours%12)===0)?12:(hours%12),token.length);}).replace(/M+/g,function(token){var _month=_this.getMonth(),_len=token.length;if(_len>3){return timezoneJS.Months[_month];}else if(_len>2){return timezoneJS.Months[_month].substring(0,_len);}
return _fixWidth(_month+ 1,_len);}).replace(/k+/g,function(){if(hours>=12){if(hours>12){hours-=12;}
return'PM';}
return'AM';}).replace(/H+/g,function(token){return _fixWidth(hours,token.length);}).replace(/E+/g,function(token){return DAYS[_this.getDay()].substring(0,token.length);}).replace(/Z+/gi,function(){return tzInfo.tzAbbr;});},toUTCString:function(){return this.toGMTString();},civilToJulianDayNumber:function(y,m,d){var a;m++;if(m>12){a=parseInt(m/12,10);m=m%12;y+=a;}
if(m<=2){y-=1;m+=12;}
a=Math.floor(y/100);var b=2- a+ Math.floor(a/4),jDt=Math.floor(365.25*(y+ 4716))+ Math.floor(30.6001*(m+ 1))+ d+ b- 1524;return jDt;},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset();}};timezoneJS.timezone=new function(){var _this=this,regionMap={'Etc':'etcetera','EST':'northamerica','MST':'northamerica','HST':'northamerica','EST5EDT':'northamerica','CST6CDT':'northamerica','MST7MDT':'northamerica','PST8PDT':'northamerica','America':'northamerica','Pacific':'australasia','Atlantic':'europe','Africa':'africa','Indian':'africa','Antarctica':'antarctica','Asia':'asia','Australia':'australasia','Europe':'europe','WET':'europe','CET':'europe','MET':'europe','EET':'europe'},regionExceptions={'Pacific/Honolulu':'northamerica','Atlantic/Bermuda':'northamerica','Atlantic/Cape_Verde':'africa','Atlantic/St_Helena':'africa','Indian/Kerguelen':'antarctica','Indian/Chagos':'asia','Indian/Maldives':'asia','Indian/Christmas':'australasia','Indian/Cocos':'australasia','America/Danmarkshavn':'europe','America/Scoresbysund':'europe','America/Godthab':'europe','America/Thule':'europe','Asia/Istanbul':'europe','Asia/Yekaterinburg':'europe','Asia/Omsk':'europe','Asia/Novosibirsk':'europe','Asia/Krasnoyarsk':'europe','Asia/Irkutsk':'europe','Asia/Yakutsk':'europe','Asia/Vladivostok':'europe','Asia/Sakhalin':'europe','Asia/Magadan':'europe','Asia/Kamchatka':'europe','Asia/Anadyr':'europe','Africa/Ceuta':'europe','America/Argentina/Buenos_Aires':'southamerica','America/Argentina/San_Luis':'southamerica','America/Argentina/Cordoba':'southamerica','America/Argentina/Tucuman':'southamerica','America/Argentina/La_Rioja':'southamerica','America/Argentina/San_Juan':'southamerica','America/Argentina/Jujuy':'southamerica','America/Argentina/Catamarca':'southamerica','America/Argentina/Mendoza':'southamerica','America/Argentina/Rio_Gallegos':'southamerica','America/Argentina/Ushuaia':'southamerica','America/Aruba':'southamerica','America/La_Paz':'southamerica','America/Noronha':'southamerica','America/Belem':'southamerica','America/Fortaleza':'southamerica','America/Recife':'southamerica','America/Araguaina':'southamerica','America/Maceio':'southamerica','America/Bahia':'southamerica','America/Sao_Paulo':'southamerica','America/Campo_Grande':'southamerica','America/Cuiaba':'southamerica','America/Porto_Velho':'southamerica','America/Boa_Vista':'southamerica','America/Manaus':'southamerica','America/Eirunepe':'southamerica','America/Rio_Branco':'southamerica','America/Santiago':'southamerica','Pacific/Easter':'southamerica','America/Bogota':'southamerica','America/Curacao':'southamerica','America/Guayaquil':'southamerica','Pacific/Galapagos':'southamerica','Atlantic/Stanley':'southamerica','America/Cayenne':'southamerica','America/Guyana':'southamerica','America/Asuncion':'southamerica','America/Lima':'southamerica','Atlantic/South_Georgia':'southamerica','America/Paramaribo':'southamerica','America/Port_of_Spain':'southamerica','America/Montevideo':'southamerica','America/Caracas':'southamerica','GMT':'etcetera','Europe/Nicosia':'asia'};function invalidTZError(t){throw new Error('Timezone "'+ t+'" is either incorrect, or not loaded in the timezone registry.');}
function builtInLoadZoneFile(fileName,opts){var url=_this.zoneFileBasePath+'/'+ fileName;return!opts||!opts.async?_this.parseZones(_this.transport({url:url,async:false})):_this.transport({async:true,url:url,success:function(str){return _this.parseZones(str)&&typeof opts.callback==='function'&&opts.callback();},error:function(){throw new Error('Error retrieving "'+ url+'" zoneinfo files');}});}
function getRegionForTimezone(tz){var exc=regionExceptions[tz],reg,ret;if(exc)return exc;reg=tz.split('/')[0];ret=regionMap[reg];if(ret)return ret;var link=_this.zones[tz];if(typeof link==='string'){return getRegionForTimezone(link);}
if(!_this.loadedZones.backward){_this.loadZoneFile('backward');return getRegionForTimezone(tz);}
invalidTZError(tz);}
function parseTimeString(str){var pat=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/;var hms=str.match(pat);hms[1]=parseInt(hms[1],10);hms[2]=hms[2]?parseInt(hms[2],10):0;hms[3]=hms[3]?parseInt(hms[3],10):0;return hms.slice(1,5);}
function processZone(z){if(!z[3]){return;}
var yea=parseInt(z[3],10),mon=11,dat=31;if(z[4]){mon=SHORT_MONTHS[z[4].substr(0,3)];dat=parseInt(z[5],10)||1;}
var t=z[6]?parseTimeString(z[6]):[0,0,0];return[yea,mon,dat,t[0],t[1],t[2]];}
function getZone(dt,tz){var utcMillis=typeof dt==='number'?dt:new Date(dt).getTime();var t=tz;var zoneList=_this.zones[t];while(typeof zoneList==="string"){t=zoneList;zoneList=_this.zones[t];}
if(!zoneList){if(!_this.loadedZones.backward){_this.loadZoneFile('backward');return getZone(dt,tz);}
invalidTZError(t);}
if(zoneList.length===0){throw new Error('No Zone found for "'+ tz+'" on '+ dt);}
for(var i=zoneList.length- 1;i>=0;i--){var z=zoneList[i];if(z[3]&&utcMillis>z[3])break;}
return zoneList[i+1];}
function getBasicOffset(time){var off=parseTimeString(time),adj=time.charAt(0)==='-'?-1:1;off=adj*(((off[0]*60+ off[1])*60+ off[2])*1000);return off/60/1000;}
function getAdjustedOffset(off,min){return-Math.ceil(min- off);}
function getRule(dt,zone,isUTC,cacheKey){var date=typeof dt==='number'?new Date(dt):dt;var ruleset=zone[1];var basicOffset=zone[0];var staticDstMatch=ruleset.match(/^([0-9]):([0-9][0-9])$/);if(staticDstMatch){return[-1000000,'max','-','Jan',1,[0,0,0],parseInt(staticDstMatch[1],10)*60+ parseInt(staticDstMatch[2],10),'-'];}
var convertDateToUTC=function(date,type,rule){var offset=0;if(type==='u'||type==='g'||type==='z'){offset=0;}else if(type==='s'){offset=basicOffset;}else if(type==='w'||!type){offset=getAdjustedOffset(basicOffset,rule[6]);}else{throw new Error("unknown type "+ type);}
offset*=60*1000;return new Date(date.getTime()+ offset);};var convertRuleToExactDateAndTime=function(yearAndRule,prevRule){var year=yearAndRule[0],rule=yearAndRule[1];var hms=rule[5];var effectiveDate;if(!EXACT_DATE_TIME[year])
EXACT_DATE_TIME[year]={};if(EXACT_DATE_TIME[year][rule])
effectiveDate=EXACT_DATE_TIME[year][rule];else{if(!isNaN(rule[4])){effectiveDate=new Date(Date.UTC(year,SHORT_MONTHS[rule[3]],rule[4],hms[0],hms[1],hms[2],0));}
else{var targetDay,operator;if(rule[4].substr(0,4)==="last"){effectiveDate=new Date(Date.UTC(year,SHORT_MONTHS[rule[3]]+ 1,1,hms[0]- 24,hms[1],hms[2],0));targetDay=SHORT_DAYS[rule[4].substr(4,3)];operator="<=";}
else{effectiveDate=new Date(Date.UTC(year,SHORT_MONTHS[rule[3]],rule[4].substr(5),hms[0],hms[1],hms[2],0));targetDay=SHORT_DAYS[rule[4].substr(0,3)];operator=rule[4].substr(3,2);}
var ourDay=effectiveDate.getUTCDay();if(operator===">="){effectiveDate.setUTCDate(effectiveDate.getUTCDate()+(targetDay- ourDay+((targetDay<ourDay)?7:0)));}
else{effectiveDate.setUTCDate(effectiveDate.getUTCDate()+(targetDay- ourDay-((targetDay>ourDay)?7:0)));}}
EXACT_DATE_TIME[year][rule]=effectiveDate;}
if(prevRule){effectiveDate=convertDateToUTC(effectiveDate,hms[3],prevRule);}
return effectiveDate;};var findApplicableRules=function(year,ruleset){var applicableRules=[];for(var i=0;ruleset&&i<ruleset.length;i++){if(ruleset[i][0]<=year&&(ruleset[i][1]>=year||(ruleset[i][0]===year&&ruleset[i][1]==="only")||ruleset[i][1]==="max")){applicableRules.push([year,ruleset[i]]);}}
return applicableRules;};var compareDates=function(a,b,prev){var year,rule,exactYearAndDate;if(!(a instanceof Date)){year=a[0];rule=a[1];exactYearAndDate=a[2];a=(!prev&&EXACT_DATE_TIME[year]&&EXACT_DATE_TIME[year][rule])?EXACT_DATE_TIME[year][rule]:(exactYearAndDate?exactYearAndDate:convertRuleToExactDateAndTime(a,prev));}else if(prev&&!isUTC){a=convertDateToUTC(a,isUTC?'u':'w',prev);}
if(!(b instanceof Date)){year=b[0];rule=b[1];exactYearAndDate=b[2];b=(!prev&&EXACT_DATE_TIME[year]&&EXACT_DATE_TIME[year][rule])?EXACT_DATE_TIME[year][rule]:(exactYearAndDate?exactYearAndDate:convertRuleToExactDateAndTime(b,prev));}else if(prev&&!isUTC){b=convertDateToUTC(b,isUTC?'u':'w',prev);}
a=Number(a);b=Number(b);return a- b;};var year=date.getUTCFullYear();var cache=timezoneJS.ruleCache[cacheKey];if(!cache)cache=timezoneJS.ruleCache[cacheKey]={};var applicableRules=cache[year];if(!applicableRules){applicableRules=findApplicableRules(year-1,_this.rules[ruleset]);applicableRules=applicableRules.concat(findApplicableRules(year,_this.rules[ruleset]));applicableRules.sort(compareDates);cache[year]=applicableRules;}
if(!applicableRules||applicableRules.length==0)return null;var prev;for(var i=applicableRules.length-1;i>=0;i--){if(i>0)prev=applicableRules[i-1][1];else prev=null;var rule=applicableRules[i];if(!rule[2]){rule[2]=convertRuleToExactDateAndTime(rule,prev);}
if(compareDates(date,rule,prev)>=0)return rule[1];}
return null;}
function getAbbreviation(zone,rule){var base=zone[2];if(base.indexOf('%s')>-1){var repl;if(rule){repl=rule[7]==='-'?'':rule[7];}
else{repl='S';}
return base.replace('%s',repl);}else if(base.indexOf('/')>-1){return base.split("/",2)[rule[6]?1:0];}
return base;}
this.zoneFileBasePath=null;this.zoneFiles=['africa','antarctica','asia','australasia','backward','etcetera','europe','northamerica','pacificnew','southamerica'];this.loadingSchemes={PRELOAD_ALL:'preloadAll',LAZY_LOAD:'lazyLoad',MANUAL_LOAD:'manualLoad'};this.getRegionForTimezone=getRegionForTimezone;this.loadingScheme=this.loadingSchemes.LAZY_LOAD;this.loadedZones={};this.zones={};this.rules={};this.init=function(o){var opts={async:true},def=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:(this.defaultZoneFile||'northamerica'),done=0,callbackFn;for(var p in o){opts[p]=o[p];}
if(typeof def==='string'){return this.loadZoneFile(def,opts);}
callbackFn=opts.callback;opts.callback=function(){done++;(done===def.length)&&typeof callbackFn==='function'&&callbackFn();};for(var i=0;i<def.length;i++){this.loadZoneFile(def[i],opts);}};this.loadZoneFile=function(fileName,opts){if(typeof this.zoneFileBasePath==='undefined'){throw new Error('Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.');}
if(this.loadedZones[fileName]){return;}
this.loadedZones[fileName]=true;return builtInLoadZoneFile(fileName,opts);};this.loadZoneJSONData=function(url,sync){var processData=function(data){data=JSON.parse(data);for(var z in data.zones){_this.zones[z]=data.zones[z];}
for(var r in data.rules){_this.rules[r]=data.rules[r];}};return sync?processData(_this.transport({url:url,async:false})):_this.transport({url:url,success:processData});};this.loadZoneDataFromObject=function(data){if(!data){return;}
for(var z in data.zones){_this.zones[z]=data.zones[z];}
for(var r in data.rules){_this.rules[r]=data.rules[r];}};this.getAllZones=function(){var arr=[];for(var z in this.zones){arr.push(z);}
return arr.sort();};this.parseZones=function(str){var lines=str.split('\n'),arr=[],chunk='',l,zone=null,rule=null;for(var i=0;i<lines.length;i++){l=lines[i];if(l.match(/^\s/)){l="Zone "+ zone+ l;}
l=l.split("#")[0];if(l.length>3){arr=l.split(/\s+/);chunk=arr.shift();switch(chunk){case'Zone':zone=arr.shift();if(!_this.zones[zone]){_this.zones[zone]=[];}
if(arr.length<3)break;arr.splice(3,arr.length,processZone(arr));if(arr[3])arr[3]=Date.UTC.apply(null,arr[3]);arr[0]=-getBasicOffset(arr[0]);_this.zones[zone].push(arr);break;case'Rule':rule=arr.shift();if(!_this.rules[rule]){_this.rules[rule]=[];}
arr[0]=parseInt(arr[0],10);arr[1]=parseInt(arr[1],10)||arr[1];arr[5]=parseTimeString(arr[5]);arr[6]=getBasicOffset(arr[6]);_this.rules[rule].push(arr);break;case'Link':if(_this.zones[arr[1]]){throw new Error('Error with Link '+ arr[1]+'. Cannot create link of a preexisted zone.');}
_this.zones[arr[1]]=arr[0];break;}}}
return true;};this.transport=_transport;this.getTzInfo=function(dt,tz,isUTC){if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){var zoneFile=getRegionForTimezone(tz);if(!zoneFile){throw new Error('Not a valid timezone ID.');}
if(!this.loadedZones[zoneFile]){this.loadZoneFile(zoneFile);}}
var z=getZone(dt,tz);var off=z[0];var rule=getRule(dt,z,isUTC,tz);if(rule){off=getAdjustedOffset(off,rule[6]);}
var abbr=getAbbreviation(z,rule);return{tzOffset:off,tzAbbr:abbr};};};}).call(this);(function(window,doc){var m=Math,dummyStyle=doc.createElement('div').style,vendor=(function(){var vendors='t,webkitT,MozT,msT,OT'.split(','),t,i=0,l=vendors.length;for(;i<l;i++){t=vendors[i]+'ransform';if(t in dummyStyle){return vendors[i].substr(0,vendors[i].length- 1);}}
return false;})(),cssVendor=vendor?'-'+ vendor.toLowerCase()+'-':'',transform=prefixStyle('transform'),transitionProperty=prefixStyle('transitionProperty'),transitionDuration=prefixStyle('transitionDuration'),transformOrigin=prefixStyle('transformOrigin'),transitionTimingFunction=prefixStyle('transitionTimingFunction'),transitionDelay=prefixStyle('transitionDelay'),isAndroid=(/android/gi).test(navigator.appVersion),isIDevice=(/iphone|ipad/gi).test(navigator.appVersion),isTouchPad=(/hp-tablet/gi).test(navigator.appVersion),hasPointerTouch=navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointerDown=navigator.pointerEnabled,hasPointers=hasPointerTouch||hasPointerDown,has3d=prefixStyle('perspective')in dummyStyle,hasTransform=vendor!==false,hasTransitionEnd=prefixStyle('transition')in dummyStyle,grabCutoffMS=hasPointers?400:300,RESIZE_EV='onorientationchange'in window?'orientationchange':'resize',TRNEND_EV=(function(){if(vendor===false)return false;var transitionEnd={'':'transitionend','webkit':'webkitTransitionEnd','Moz':'transitionend','O':'otransitionend','ms':'MSTransitionEnd'};return transitionEnd[vendor];})(),nextFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1);};})(),cancelFrame=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;})(),translateZ=has3d?' translateZ(0)':'',iScroll=function(el,options){var that=this,i;that.wrapper=typeof el=='object'?el:doc.getElementById(el);if(that.wrapper==null)return;that.wrapper.style.overflow='hidden';that.scroller=options.scroller?options.scroller:that.wrapper.children[0];that.touches=[];that.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceBottom:true,bounceTop:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:isAndroid,hideScrollbar:isIDevice,fadeScrollbar:isIDevice&&has3d,scrollbarClass:'',zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:'scroll',wheelMultiplier:6,snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){if(e.target.tagName=="SELECT"||e.target.tagName=="INPUT"||e.tagName=="TEXTAREA"||e.tagName=="BUTTON")
return;if(e.target.getAttribute("noiscroll"))return;e.preventDefault();},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(i in options)that.options[i]=options[i];that.x=that.options.x;that.y=that.options.y;that.options.useTransform=hasTransform&&that.options.useTransform;that.options.hScrollbar=that.options.hScroll&&that.options.hScrollbar;that.options.vScrollbar=that.options.vScroll&&that.options.vScrollbar;that.options.zoom=that.options.useTransform&&that.options.zoom;that.options.useTransition=hasTransitionEnd&&that.options.useTransition;if(that.options.zoom&&isAndroid){translateZ='';}
that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+'transform':'top left';that.scroller.style[transitionDuration]='0';that.scroller.style[transformOrigin]='0 0';if(that.options.useTransition)that.scroller.style[transitionTimingFunction]='cubic-bezier(0.33,0.66,0.66,1)';if(that.options.useTransform)that.scroller.style[transform]='translate('+ that.x+'px,'+ that.y+'px)'+ translateZ;else that.scroller.style.cssText+=';position:absolute;top:'+ that.y+'px;left:'+ that.x+'px';if(that.options.useTransition)that.options.fixedScrollbar=true;that.refresh();that._bind(RESIZE_EV,window);if(hasPointerDown)that._bind("pointerdown");if(hasPointerTouch&&!hasPointerDown)that._bind("MSPointerDown");that._bind("touchstart");if(!hasPointers&&!isIDevice)that._bind("mousedown");if(that.options.wheelAction!='none'){that._bind('DOMMouseScroll');that._bind('mousewheel');}
if(that.options.checkDOMChanges)that.checkDOMTime=setInterval(function(){that._checkDOMChanges();},500);};iScroll.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var that=this;switch(e.type){case"pointerdown":case"MSPointerDown":case"touchstart":that.hasTouch=true;that._start(e);break;case"mousedown":that.hasTouch=false;that._start(e);break;case"pointermove":case"MSPointerMove":case"touchmove":case"mousemove":that._move(e);break;case"pointercancel":case"touchcancel":case"MSPointerCancel":case"MSPointerUp":case"pointerup":case"touchend":case"mouseup":that._end(e);break;case RESIZE_EV:that._resize();break;case'DOMMouseScroll':case'mousewheel':that._wheel(e);break;case TRNEND_EV:that._transitionEnd(e);break;}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale))return;this.refresh();},_scrollbar:function(dir){var that=this,bar;if(!that[dir+'Scrollbar']){if(that[dir+'ScrollbarWrapper']){if(hasTransform)that[dir+'ScrollbarIndicator'].style[transform]='';that[dir+'ScrollbarWrapper'].parentNode.removeChild(that[dir+'ScrollbarWrapper']);that[dir+'ScrollbarWrapper']=null;that[dir+'ScrollbarIndicator']=null;}
return;}
if(!that[dir+'ScrollbarWrapper']){bar=doc.createElement('div');if(that.options.scrollbarClass)bar.className=that.options.scrollbarClass+ dir.toUpperCase();else bar.style.cssText='position:absolute;z-index:100;'+(dir=='h'?'height:7px;bottom:1px;left:2px;right:'+(that.vScrollbar?'7':'2')+'px':'width:7px;bottom:'+(that.hScrollbar?'7':'2')+'px;top:2px;right:1px');bar.style.cssText+=';pointer-events:none;'+ cssVendor+'transition-property:opacity;'+ cssVendor+'transition-duration:'+(that.options.fadeScrollbar?'350ms':'0')+';overflow:hidden;opacity:'+(that.options.hideScrollbar?'0':'1');that.wrapper.appendChild(bar);that[dir+'ScrollbarWrapper']=bar;bar=doc.createElement('div');if(!that.options.scrollbarClass){bar.style.cssText='position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);'+ cssVendor+'background-clip:padding-box;'+ cssVendor+'box-sizing:border-box;'+(dir=='h'?'height:100%':'width:100%')+';'+ cssVendor+'border-radius:3px;border-radius:3px';}
bar.style.cssText+=';pointer-events:none;'+ cssVendor+'transition-property:'+ cssVendor+'transform;'+ cssVendor+'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);'+ cssVendor+'transition-duration:0;'+ cssVendor+'transform: translate(0,0)'+ translateZ;if(that.options.useTransition)bar.style.cssText+=';'+ cssVendor+'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';that[dir+'ScrollbarWrapper'].appendChild(bar);that[dir+'ScrollbarIndicator']=bar;}
if(dir=='h'){that.hScrollbarSize=that.hScrollbarWrapper.clientWidth;that.hScrollbarIndicatorSize=m.max(m.round(that.hScrollbarSize*that.hScrollbarSize/that.scrollerW),8);that.hScrollbarIndicator.style.width=that.hScrollbarIndicatorSize+'px';that.hScrollbarMaxScroll=that.hScrollbarSize- that.hScrollbarIndicatorSize;that.hScrollbarProp=that.hScrollbarMaxScroll/that.maxScrollX;}else{that.vScrollbarSize=that.vScrollbarWrapper.clientHeight;that.vScrollbarIndicatorSize=m.max(m.round(that.vScrollbarSize*that.vScrollbarSize/that.scrollerH),8);that.vScrollbarIndicator.style.height=that.vScrollbarIndicatorSize+'px';that.vScrollbarMaxScroll=that.vScrollbarSize- that.vScrollbarIndicatorSize;that.vScrollbarProp=that.vScrollbarMaxScroll/that.maxScrollY;}
that._scrollbarPos(dir,true);},_resize:function(){var that=this;setTimeout(function(){that.refresh();},isAndroid?200:0);},_pos:function(x,y){if(this.zoomed)return;x=this.hScroll?x:0;y=this.vScroll?y:0;if(this.options.useTransform){this.scroller.style[transform]='translate('+ x+'px,'+ y+'px) scale('+ this.scale+')'+ translateZ;}else{x=m.round(x);y=m.round(y);this.scroller.style.left=x+'px';this.scroller.style.top=y+'px';}
this.x=x;this.y=y;this._scrollbarPos('h');this._scrollbarPos('v');},_scrollbarPos:function(dir,hidden){var that=this,pos=dir=='h'?that.x:that.y,size;if(!that[dir+'Scrollbar'])return;pos=that[dir+'ScrollbarProp']*pos;if(pos<0){if(!that.options.fixedScrollbar){size=that[dir+'ScrollbarIndicatorSize']+ m.round(pos*3);if(size<8)size=8;that[dir+'ScrollbarIndicator'].style[dir=='h'?'width':'height']=size+'px';}
pos=0;}else if(pos>that[dir+'ScrollbarMaxScroll']){if(!that.options.fixedScrollbar){size=that[dir+'ScrollbarIndicatorSize']- m.round((pos- that[dir+'ScrollbarMaxScroll'])*3);if(size<8)size=8;that[dir+'ScrollbarIndicator'].style[dir=='h'?'width':'height']=size+'px';pos=that[dir+'ScrollbarMaxScroll']+(that[dir+'ScrollbarIndicatorSize']- size);}else{pos=that[dir+'ScrollbarMaxScroll'];}}
that[dir+'ScrollbarWrapper'].style[transitionDelay]='0';that[dir+'ScrollbarWrapper'].style.opacity=hidden&&that.options.hideScrollbar?'0':'1';that[dir+'ScrollbarIndicator'].style[transform]='translate('+(dir=='h'?pos+'px,0)':'0,'+ pos+'px)')+ translateZ;},_start:function(e){if(hasPointers){this.touches[this.touches.length]={pointerId:e.pointerId,pageX:e.screenX,pageY:e.screenY};e.touches=this.touches;}
var that=this,point=this.hasTouch?(e.touches&&e.touches[0]):e,matrix,x,y,c1,c2;if(!that.enabled)return;if(that.options.onBeforeScrollStart)that.options.onBeforeScrollStart.call(that,e);if(that.options.useTransition||that.options.zoom)that._transitionTime(0);that.moved=false;that.animating=false;that.zoomed=false;that.distX=0;that.distY=0;that.absDistX=0;that.absDistY=0;that.dirX=0;that.dirY=0;if(that.options.zoom&&this.hasTouch&&e.touches.length>1){c1=m.abs(e.touches[0].pageX-e.touches[1].pageX);c2=m.abs(e.touches[0].pageY-e.touches[1].pageY);that.touchesDistStart=m.sqrt(c1*c1+ c2*c2);that.originX=m.abs(e.touches[0].pageX+ e.touches[1].pageX- that.wrapperOffsetLeft*2)/ 2 - that.x;
that.originY=m.abs(e.touches[0].pageY+ e.touches[1].pageY- that.wrapperOffsetTop*2)/ 2 - that.y;
if(that.options.onZoomStart)that.options.onZoomStart.call(that,e);}
if(that.options.momentum){if(that.options.useTransform){matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,'').split(',');x=+(matrix[12]||matrix[4]);y=+(matrix[13]||matrix[5]);}else{x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,'');y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,'');}
if(x!=that.x||y!=that.y){if(that.options.useTransition)that._unbind(TRNEND_EV);else cancelFrame(that.aniTime);that.steps=[];that._pos(x,y);if(that.options.onScrollEnd)that.options.onScrollEnd.call(that);}}
that.absStartX=that.x;that.absStartY=that.y;that.startX=that.x;that.startY=that.y;that.pointX=point.pageX;that.pointY=point.pageY;that.startTime=e.timeStamp||Date.now();if(that.options.onScrollStart)that.options.onScrollStart.call(that,e);if(hasPointerDown)that._bind("pointermove",window);if(hasPointerTouch&&!hasPointerDown)that._bind("MSPointerMove",window);that._bind("touchmove",window);if(!hasPointers&&!isIDevice)that._bind("mousemove",window);if(hasPointerDown)that._bind("pointerup",window);if(hasPointerTouch&&!hasPointerDown)that._bind("MSPointerUp",window);that._bind("touchend",window);if(!hasPointers&&!isIDevice)that._bind("mouseup",window);if(hasPointerDown)that._bind("pointercancel",window);if(hasPointerTouch&&!hasPointerDown)that._bind("MSPointerCancel",window);that._bind("touchcancel",window);},_move:function(e){if(hasPointers){for(var i=0;i<this.touches.length;i++){if(this.touches[i].pageX==e.screenX&&this.touches[i].pageY==e.screenY)return;this.touches[i].pageX=e.screenX;this.touches[i].pageY=e.screenY;break;}
e.touches=this.touches;}
var that=this,point=this.hasTouch?e.touches[0]:e,deltaX=point.pageX- that.pointX,deltaY=point.pageY- that.pointY,newX=that.x+ deltaX,newY=that.y+ deltaY,c1,c2,scale,timestamp=e.timeStamp||Date.now();if(that.options.onBeforeScrollMove)that.options.onBeforeScrollMove.call(that,e);if(that.options.zoom&&this.hasTouch&&e.touches.length>1){c1=m.abs(e.touches[0].pageX- e.touches[1].pageX);c2=m.abs(e.touches[0].pageY- e.touches[1].pageY);that.touchesDist=m.sqrt(c1*c1+c2*c2);that.zoomed=true;scale=1/that.touchesDistStart*that.touchesDist*this.scale;if(scale<that.options.zoomMin)scale=0.5*that.options.zoomMin*Math.pow(2.0,scale/that.options.zoomMin);else if(scale>that.options.zoomMax)scale=2.0*that.options.zoomMax*Math.pow(0.5,that.options.zoomMax/scale);that.lastScale=scale/this.scale;newX=this.originX- this.originX*that.lastScale+ this.x,newY=this.originY- this.originY*that.lastScale+ this.y;this.scroller.style[transform]='translate('+ newX+'px,'+ newY+'px) scale('+ scale+')'+ translateZ;if(that.options.onZoom)that.options.onZoom.call(that,e);return;}
that.pointX=point.pageX;that.pointY=point.pageY;if(newX>0||newX<that.maxScrollX){newX=that.options.bounce?that.x+(deltaX/2):newX>=0||that.maxScrollX>=0?0:that.maxScrollX;}
if(newY<that.maxScrollY){newY=(that.options.bounce||that.options.bounceBottom)?that.y+(deltaY/2):newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY;}else if(newY>that.minScrollY){newY=(that.options.bounce||that.options.bounceTop)?that.y+(deltaY/2):newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY;}
that.distX+=deltaX;that.distY+=deltaY;that.absDistX=m.abs(that.distX);that.absDistY=m.abs(that.distY);if(that.absDistX<6&&that.absDistY<6){return;}
if(that.options.lockDirection){if(that.absDistX>that.absDistY+ 5){newY=that.y;deltaY=0;}else if(that.absDistY>that.absDistX+ 5){newX=that.x;deltaX=0;}}
that.moved=true;that._pos(newX,newY);that.dirX=deltaX>0?-1:deltaX<0?1:0;that.dirY=deltaY>0?-1:deltaY<0?1:0;if(timestamp- that.startTime>grabCutoffMS){that.startTime=timestamp;that.startX=that.x;that.startY=that.y;}
if(that.options.onScrollMove)that.options.onScrollMove.call(that,e);},_end:function(e){if(hasPointers){for(var i=0;i<this.touches.length;i++){if(this.touches[i].pointerId==e.pointerId){this.touches.splice(i,1);break;}}
e.touches=this.touches;}
if(this.hasTouch&&e.touches.length!==0)return;var that=this,point=(hasPointers)?e:this.hasTouch?e.changedTouches[0]:e,target,ev,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())- that.startTime,newPosX=that.x,newPosY=that.y,distX,distY,newDuration,snap,scale;that._unbind("pointermove",window);that._unbind("MSPointerMove",window);that._unbind("touchmove",window);that._unbind("mousemove",window);that._unbind("pointerup",window);that._unbind("MSPointerUp",window);that._unbind("touchend",window);that._unbind("mouseup",window);that._unbind("pointercancel",window);that._unbind("MSPointerCancel",window);that._unbind("touchcancel",window);if(that.options.onBeforeScrollEnd)that.options.onBeforeScrollEnd.call(that,e);if(that.zoomed){scale=that.scale*that.lastScale;scale=Math.max(that.options.zoomMin,scale);scale=Math.min(that.options.zoomMax,scale);that.lastScale=scale/that.scale;that.scale=scale;that.x=that.originX- that.originX*that.lastScale+ that.x;that.y=that.originY- that.originY*that.lastScale+ that.y;that.scroller.style[transitionDuration]='200ms';that.scroller.style[transform]='translate('+ that.x+'px,'+ that.y+'px) scale('+ that.scale+')'+ translateZ;that.zoomed=false;that.refresh();if(that.options.onZoomEnd)that.options.onZoomEnd.call(that,e);return;}
if(!that.moved){if(this.hasTouch){if(that.doubleTapTimer&&that.options.zoom){clearTimeout(that.doubleTapTimer);that.doubleTapTimer=null;if(that.options.onZoomStart)that.options.onZoomStart.call(that,e);that.zoom(that.pointX,that.pointY,that.scale==1?that.options.doubleTapZoom:1);if(that.options.onZoomEnd){setTimeout(function(){that.options.onZoomEnd.call(that,e);},200);}}else if(this.options.handleClick&&!(hasPointers)){that.doubleTapTimer=setTimeout(function(){that.doubleTapTimer=null;target=point.target;while(target.nodeType!=1)target=target.parentNode;if(target.tagName!='SELECT'&&target.tagName!='INPUT'&&target.tagName!='TEXTAREA'){ev=doc.createEvent('MouseEvents');ev.initMouseEvent('click',true,true,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._fake=true;target.dispatchEvent(ev);}},that.options.zoom?250:0);}}
that._resetPos(400);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return;}
if(duration<grabCutoffMS&&that.options.momentum){momentumX=newPosX?that._momentum(newPosX- that.startX,duration,-that.x,that.scrollerW- that.wrapperW+ that.x,that.options.bounce?that.wrapperW:0):momentumX;var bounceIt=that.options.bounce;if(that.options.bounceBottom&&(newPosY- that.startY)<0)bounceIt=true;if(that.options.bounceTop&&(newPosY- that.startY)>0)bounceIt=true;momentumY=newPosY?that._momentum(newPosY- that.startY,duration,-that.y,(that.maxScrollY<0?that.scrollerH- that.wrapperH+ that.y- that.minScrollY:0),bounceIt?that.wrapperH:0):momentumY;newPosX=that.x+ momentumX.dist;newPosY=that.y+ momentumY.dist;if((that.x>0&&newPosX>0)||(that.x<that.maxScrollX&&newPosX<that.maxScrollX))momentumX={dist:0,time:0};if((that.y>that.minScrollY&&newPosY>that.minScrollY)||(that.y<that.maxScrollY&&newPosY<that.maxScrollY))momentumY={dist:0,time:0};}
if(momentumX.dist||momentumY.dist){newDuration=m.max(m.max(momentumX.time,momentumY.time),10);if(that.options.snap){distX=newPosX- that.absStartX;distY=newPosY- that.absStartY;if(m.abs(distX)<that.options.snapThreshold&&m.abs(distY)<that.options.snapThreshold){that.scrollTo(that.absStartX,that.absStartY,200);}
else{snap=that._snap(newPosX,newPosY);newPosX=snap.x;newPosY=snap.y;newDuration=m.max(snap.time,newDuration);}}
that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return;}
if(that.options.snap){distX=newPosX- that.absStartX;distY=newPosY- that.absStartY;if(m.abs(distX)<that.options.snapThreshold&&m.abs(distY)<that.options.snapThreshold)that.scrollTo(that.absStartX,that.absStartY,200);else{snap=that._snap(that.x,that.y);if(snap.x!=that.x||snap.y!=that.y)that.scrollTo(snap.x,snap.y,snap.time);}
if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return;}
that._resetPos(200);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;if(resetX==that.x&&resetY==that.y){if(that.moved){that.moved=false;if(that.options.onScrollEnd)that.options.onScrollEnd.call(that);}
if(that.hScrollbar&&that.options.hideScrollbar){if(vendor=='webkit')that.hScrollbarWrapper.style[transitionDelay]='300ms';that.hScrollbarWrapper.style.opacity='0';}
if(that.vScrollbar&&that.options.hideScrollbar){if(vendor=='webkit')that.vScrollbarWrapper.style[transitionDelay]='300ms';that.vScrollbarWrapper.style.opacity='0';}
return;}
that.scrollTo(resetX,resetY,time||0);},_wheel:function(e){var that=this,wheelDeltaX,wheelDeltaY,deltaX,deltaY,deltaScale;if('wheelDeltaX'in e){wheelDeltaX=e.wheelDeltaX/12;wheelDeltaY=e.wheelDeltaY/12;}else if('wheelDelta'in e){wheelDeltaX=0;wheelDeltaY=e.wheelDelta/12;}else if('detail'in e){wheelDeltaX=wheelDeltaY=0;if(e.axis){if(e.axis==1)wheelDeltaX=-e.detail*that.options.wheelMultiplier;else if(e.axis==2)wheelDeltaY=-e.detail*that.options.wheelMultiplier;}else{wheelDeltaX=wheelDeltaY=-e.detail*that.options.wheelMultiplier;}}else{return;}
if(that.options.onBeforeScrollMove)that.options.onBeforeScrollMove.call(that,e);if(that.options.wheelAction=='zoom'){deltaScale=that.scale*Math.pow(2,1/3*(wheelDeltaY?wheelDeltaY/Math.abs(wheelDeltaY):0));if(deltaScale<that.options.zoomMin)deltaScale=that.options.zoomMin;if(deltaScale>that.options.zoomMax)deltaScale=that.options.zoomMax;if(deltaScale!=that.scale){if(!that.wheelZoomCount&&that.options.onZoomStart)that.options.onZoomStart.call(that,e);that.wheelZoomCount++;that.zoom(e.pageX,e.pageY,deltaScale,400);setTimeout(function(){that.wheelZoomCount--;if(!that.wheelZoomCount&&that.options.onZoomEnd)that.options.onZoomEnd.call(that,e);},400);}
return;}
deltaX=that.x+ wheelDeltaX;deltaY=that.y+ wheelDeltaY;if(deltaX>0)deltaX=0;else if(deltaX<that.maxScrollX)deltaX=that.maxScrollX;if(deltaY>that.minScrollY)deltaY=that.minScrollY;else if(deltaY<that.maxScrollY)deltaY=that.maxScrollY;if(that.maxScrollY<0){that.scrollTo(deltaX,deltaY,0);}
if(that.options.onScrollMove)that.options.onScrollMove.call(that,e);},_transitionEnd:function(e){var that=this;if(e.target!=that.scroller)return;that._unbind(TRNEND_EV);that._startAni();},_startAni:function(){var that=this,startX=that.x,startY=that.y,startTime=Date.now(),step,easeOut,animate;if(that.animating)return;if(!that.steps.length){that._resetPos(400);return;}
step=that.steps.shift();if(step.x==startX&&step.y==startY)step.time=0;that.animating=true;that.moved=true;if(that.options.useTransition){that._transitionTime(step.time);that._pos(step.x,step.y);that.animating=false;if(step.time)that._bind(TRNEND_EV);else that._resetPos(0);return;}
animate=function(){var now=Date.now(),newX,newY;if(now>=startTime+ step.time){that._pos(step.x,step.y);that.animating=false;if(that.options.onAnimationEnd)that.options.onAnimationEnd.call(that);that._startAni();return;}
now=(now- startTime)/ step.time - 1;
easeOut=m.sqrt(1- now*now);newX=(step.x- startX)*easeOut+ startX;newY=(step.y- startY)*easeOut+ startY;that._pos(newX,newY);if(that.animating)that.aniTime=nextFrame(animate);};animate();},_transitionTime:function(time){time+='ms';this.scroller.style[transitionDuration]=time;if(this.hScrollbar)this.hScrollbarIndicator.style[transitionDuration]=time;if(this.vScrollbar)this.vScrollbarIndicator.style[transitionDuration]=time;},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=0.0006,speed=m.abs(dist)/ time,
newDist=(speed*speed)/ (2 * deceleration),
newTime=0,outsideDist=0;if(dist>0&&newDist>maxDistUpper){outsideDist=size/(6/(newDist/speed*deceleration));maxDistUpper=maxDistUpper+ outsideDist;speed=speed*maxDistUpper/newDist;newDist=maxDistUpper;}else if(dist<0&&newDist>maxDistLower){outsideDist=size/(6/(newDist/speed*deceleration));maxDistLower=maxDistLower+ outsideDist;speed=speed*maxDistLower/newDist;newDist=maxDistLower;}
newDist=newDist*(dist<0?-1:1);newTime=speed/deceleration;return{dist:newDist,time:m.round(newTime)};},_offset:function(el){var left=-el.offsetLeft,top=-el.offsetTop;while(el=el.offsetParent){left-=el.offsetLeft;top-=el.offsetTop;}
if(el!=this.wrapper){left*=this.scale;top*=this.scale;}
return{left:left,top:top};},_snap:function(x,y){var that=this,i,l,page,time,sizeX,sizeY;page=that.pagesX.length- 1;for(i=0,l=that.pagesX.length;i<l;i++){if(x>=that.pagesX[i]){page=i;break;}}
if(page==that.currPageX&&page>0&&that.dirX<0)page--;x=that.pagesX[page];sizeX=m.abs(x- that.pagesX[that.currPageX]);sizeX=sizeX?m.abs(that.x- x)/ sizeX * 500 : 0;
that.currPageX=page;page=that.pagesY.length-1;for(i=0;i<page;i++){if(y>=that.pagesY[i]){page=i;break;}}
if(page==that.currPageY&&page>0&&that.dirY<0)page--;y=that.pagesY[page];sizeY=m.abs(y- that.pagesY[that.currPageY]);sizeY=sizeY?m.abs(that.y- y)/ sizeY * 500 : 0;
that.currPageY=page;time=m.round(m.max(sizeX,sizeY))||200;return{x:x,y:y,time:time};},_bind:function(type,el,bubble){(el||this.scroller).addEventListener(type,this,!!bubble);},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble);},destroy:function(){var that=this;that.scroller.style[transform]='';that.hScrollbar=false;that.vScrollbar=false;that._scrollbar('h');that._scrollbar('v');that._unbind("pointerdown");that._unbind("MSPointerDown");that._unbind("touchstart");that._unbind("mousedown");that._unbind("pointermove",window);that._unbind("MSPointerMove",window);that._unbind("touchmove",window);that._unbind("mousemove",window);that._unbind("pointerup",window);that._unbind("MSPointerUp",window);that._unbind("touchend",window);that._unbind("mouseup",window);that._unbind("pointercancel",window);that._unbind("MSPointerCancel",window);that._unbind("touchcancel",window);that._unbind(RESIZE_EV,window);that._unbind('DOMMouseScroll');that._unbind('mousewheel');if(that.options.useTransition)that._unbind(TRNEND_EV);if(that.options.checkDOMChanges)clearInterval(that.checkDOMTime);if(that.options.onDestroy)that.options.onDestroy.call(that);},fixScrollElementWidth:function(){var scrollElement=this.scroller;scrollElement.style.width="4000px";var scrollWrapper=this.wrapper;if(!window.isIE8){var width=[].reduce.call(scrollElement.children[0].children,function(sum,element){return sum+ element.offsetWidth;},0);width+=1;scrollElement.style.width=width+'px';}},refresh:function(){var that=this,offset,i,l,els,pos=0,page=0;if(that.scale<that.options.zoomMin)that.scale=that.options.zoomMin;that.wrapperW=that.wrapper.clientWidth||1;that.wrapperH=that.wrapper.clientHeight||1;if(that.options.hScroll){that.fixScrollElementWidth();}
that.minScrollY=-that.options.topOffset||0;that.scrollerW=m.round(that.scroller.offsetWidth*that.scale);that.scrollerH=m.round((that.scroller.offsetHeight+ that.minScrollY)*that.scale);that.maxScrollX=that.wrapperW- that.scrollerW;that.maxScrollY=that.wrapperH- that.scrollerH+ that.minScrollY;that.dirX=0;that.dirY=0;if(that.options.onRefresh)that.options.onRefresh.call(that);that.hScroll=that.options.hScroll&&that.maxScrollX<0;that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH);that.hScrollbar=that.hScroll&&that.options.hScrollbar;that.vScrollbar=that.vScroll&&that.options.vScrollbar&&that.scrollerH>that.wrapperH;offset=that._offset(that.wrapper);that.wrapperOffsetLeft=-offset.left;that.wrapperOffsetTop=-offset.top;if(typeof that.options.snap=='string'){that.pagesX=[];that.pagesY=[];els=that.scroller.querySelectorAll(that.options.snap);for(i=0,l=els.length;i<l;i++){pos=that._offset(els[i]);pos.left+=that.wrapperOffsetLeft;pos.top+=that.wrapperOffsetTop;that.pagesX[i]=pos.left<that.maxScrollX?that.maxScrollX:pos.left*that.scale;that.pagesY[i]=pos.top<that.maxScrollY?that.maxScrollY:pos.top*that.scale;}}else if(that.options.snap){that.pagesX=[];while(pos>=that.maxScrollX){that.pagesX[page]=pos;pos=pos- that.wrapperW;page++;}
if(that.maxScrollX%that.wrapperW)that.pagesX[that.pagesX.length]=that.maxScrollX- that.pagesX[that.pagesX.length-1]+ that.pagesX[that.pagesX.length-1];pos=0;page=0;that.pagesY=[];while(pos>=that.maxScrollY){that.pagesY[page]=pos;pos=pos- that.wrapperH;page++;}
if(that.maxScrollY%that.wrapperH)that.pagesY[that.pagesY.length]=that.maxScrollY- that.pagesY[that.pagesY.length-1]+ that.pagesY[that.pagesY.length-1];}
that._scrollbar('h');that._scrollbar('v');if(!that.zoomed){that.scroller.style[transitionDuration]='0';that._resetPos(400);}},scrollTo:function(x,y,time,relative){var that=this,step=x,i,l;that.stop();if(!step.length)step=[{x:x,y:y,time:time,relative:relative}];for(i=0,l=step.length;i<l;i++){if(step[i].relative){step[i].x=that.x- step[i].x;step[i].y=that.y- step[i].y;}
that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});}
that._startAni();},scrollToElement:function(el,time){var that=this,pos;el=el.nodeType?el:that.scroller.querySelector(el);if(!el)return;pos=that._offset(el);pos.left+=that.wrapperOffsetLeft;pos.top+=that.wrapperOffsetTop;pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left;time=time===undefined?m.max(m.abs(pos.left)*2,m.abs(pos.top)*2):time;if(pos.top!=0&&pos.top<that.maxScrollY)pos.top=that.maxScrollY;if(pos.top>0)return;that.scrollTo(pos.left,pos.top,time);},scrollToPage:function(pageX,pageY,time){var that=this,x,y;time=time===undefined?400:time;if(that.options.onScrollStart)that.options.onScrollStart.call(that);if(that.options.snap){pageX=pageX=='next'?that.currPageX+1:pageX=='prev'?that.currPageX-1:pageX;pageY=pageY=='next'?that.currPageY+1:pageY=='prev'?that.currPageY-1:pageY;pageX=pageX<0?0:pageX>that.pagesX.length-1?that.pagesX.length-1:pageX;pageY=pageY<0?0:pageY>that.pagesY.length-1?that.pagesY.length-1:pageY;that.currPageX=pageX;that.currPageY=pageY;x=that.pagesX[pageX];y=that.pagesY[pageY];}else{x=-that.wrapperW*pageX;y=-that.wrapperH*pageY;if(x<that.maxScrollX)x=that.maxScrollX;if(y<that.maxScrollY)y=that.maxScrollY;}
that.scrollTo(x,y,time);},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind("pointermove",window);this._unbind("MSPointerMove",window);this._unbind("touchmove",window);this._unbind("mousemove",window);this._unbind("pointerup",window);this._unbind("MSPointerUp",window);this._unbind("touchend",window);this._unbind("mouseup",window);this._unbind("pointercancel",window);this._unbind("MSPointerCancel",window);this._unbind("touchcancel",window);},enable:function(){this.enabled=true;},stop:function(){if(this.options.useTransition)this._unbind(TRNEND_EV);else cancelFrame(this.aniTime);this.steps=[];this.moved=false;this.animating=false;},zoom:function(x,y,scale,time){var that=this,relScale=scale/that.scale;if(!that.options.useTransform)return;that.zoomed=true;time=time===undefined?200:time;x=x- that.wrapperOffsetLeft- that.x;y=y- that.wrapperOffsetTop- that.y;that.x=x- x*relScale+ that.x;that.y=y- y*relScale+ that.y;that.scale=scale;that.refresh();that.x=that.x>0?0:that.x<that.maxScrollX?that.maxScrollX:that.x;that.y=that.y>that.minScrollY?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;that.scroller.style[transitionDuration]=time+'ms';that.scroller.style[transform]='translate('+ that.x+'px,'+ that.y+'px) scale('+ scale+')'+ translateZ;that.zoomed=false;},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating;}};function prefixStyle(style){if(vendor==='')return style;style=style.charAt(0).toUpperCase()+ style.substr(1);return vendor+ style;}
dummyStyle=null;_exports.iScroll=iScroll;})(window,document);(function(window,document,Math){var rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};var utils=(function(){var me={};var _elementStyle=document.createElement('div').style;var _vendor=(function(){var vendors=['t','webkitT','MozT','msT','OT'],transform,i=0,l=vendors.length;for(;i<l;i++){transform=vendors[i]+'ransform';if(transform in _elementStyle)return vendors[i].substr(0,vendors[i].length-1);}
return false;})();function _prefixStyle(style){if(_vendor===false)return false;if(_vendor==='')return style;return _vendor+ style.charAt(0).toUpperCase()+ style.substr(1);}
me.getTime=Date.now||function getTime(){return new Date().getTime();};me.extend=function(target,obj){for(var i in obj){target[i]=obj[i];}};me.addEvent=function(el,type,fn,capture){el.addEventListener(type,fn,!!capture);};me.removeEvent=function(el,type,fn,capture){el.removeEventListener(type,fn,!!capture);};me.prefixPointerEvent=function(pointerEvent){return window.MSPointerEvent?'MSPointer'+ pointerEvent.charAt(9).toUpperCase()+ pointerEvent.substr(10):pointerEvent;};me.momentum=function(current,start,time,lowerMargin,wrapperSize,deceleration){var distance=current- start,speed=Math.abs(distance)/ time,
destination,duration;deceleration=deceleration===undefined?0.0006:deceleration;destination=current+(speed*speed)/ ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );
duration=speed/deceleration;if(destination<lowerMargin){destination=wrapperSize?lowerMargin-(wrapperSize/2.5*(speed/8)):lowerMargin;distance=Math.abs(destination- current);duration=distance/speed;}else if(destination>0){destination=wrapperSize?wrapperSize/2.5*(speed/8):0;distance=Math.abs(current)+ destination;duration=distance/speed;}
return{destination:Math.round(destination),duration:duration};};var _transform=_prefixStyle('transform');me.extend(me,{hasTransform:_transform!==false,hasPerspective:_prefixStyle('perspective')in _elementStyle,hasTouch:'ontouchstart'in window,hasPointer:window.PointerEvent||window.MSPointerEvent,hasTransition:_prefixStyle('transition')in _elementStyle});me.isBadAndroid=/Android /.test(window.navigator.appVersion)&&!(/Chrome\/\d/.test(window.navigator.appVersion));me.extend(me.style={},{transform:_transform,transitionTimingFunction:_prefixStyle('transitionTimingFunction'),transitionDuration:_prefixStyle('transitionDuration'),transitionDelay:_prefixStyle('transitionDelay'),transformOrigin:_prefixStyle('transformOrigin')});me.hasClass=function(e,c){var re=new RegExp("(^|\\s)"+ c+"(\\s|$)");return re.test(e.className);};me.addClass=function(e,c){if(me.hasClass(e,c)){return;}
var newclass=e.className.split(' ');newclass.push(c);e.className=newclass.join(' ');};me.removeClass=function(e,c){if(!me.hasClass(e,c)){return;}
var re=new RegExp("(^|\\s)"+ c+"(\\s|$)",'g');e.className=e.className.replace(re,' ');};me.offset=function(el){var left=-el.offsetLeft,top=-el.offsetTop;while(el=el.offsetParent){left-=el.offsetLeft;top-=el.offsetTop;}
return{left:left,top:top};};me.preventDefaultException=function(el,exceptions){for(var i in exceptions){if(exceptions[i].test(el[i])){return true;}}
return false;};me.extend(me.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});me.extend(me.ease={},{quadratic:{style:'cubic-bezier(0.25, 0.46, 0.45, 0.94)',fn:function(k){return k*(2- k);}},circular:{style:'cubic-bezier(0.1, 0.57, 0.1, 1)',fn:function(k){return Math.sqrt(1-(--k*k));}},back:{style:'cubic-bezier(0.175, 0.885, 0.32, 1.275)',fn:function(k){var b=4;return(k=k- 1)*k*((b+ 1)*k+ b)+ 1;}},bounce:{style:'',fn:function(k){if((k/=1)<(1/2.75)){return 7.5625*k*k;}else if(k<(2/2.75)){return 7.5625*(k-=(1.5/2.75))*k+ 0.75;}else if(k<(2.5/2.75)){return 7.5625*(k-=(2.25/2.75))*k+ 0.9375;}else{return 7.5625*(k-=(2.625/2.75))*k+ 0.984375;}}},elastic:{style:'',fn:function(k){var f=0.22,e=0.4;if(k===0){return 0;}
if(k==1){return 1;}
return(e*Math.pow(2,- 10*k)*Math.sin((k- f/4)*(2*Math.PI)/ f ) + 1 );
}}});me.tap=function(e,eventName){var ev=document.createEvent('Event');ev.initEvent(eventName,true,true);ev.pageX=e.pageX;ev.pageY=e.pageY;e.target.dispatchEvent(ev);};me.click=function(e){var target=e.target,ev;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName)){ev=document.createEvent('MouseEvents');ev.initMouseEvent('click',true,true,e.view,1,target.screenX,target.screenY,target.clientX,target.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._constructed=true;target.dispatchEvent(ev);}};return me;})();function IScroll(el,options){this.wrapper=typeof el=='string'?document.querySelector(el):el;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:'',preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var i in options){this.options[i]=options[i];}
this.translateZ=this.options.HWCompositing&&utils.hasPerspective?' translateZ(0)':'';this.options.useTransition=utils.hasTransition&&this.options.useTransition;this.options.useTransform=utils.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?'vertical':this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=='vertical'?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=='horizontal'?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=='string'?utils.ease[this.options.bounceEasing]||utils.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap='tap';}
if(this.options.shrinkScrollbars=='scale'){this.options.useTransition=false;}
this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable();}
IScroll.prototype={version:'5.1.3',_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators();}
this.options.mouseWheel=true;if(this.options.mouseWheel){this._initWheel();}
if(this.options.snap){this._initSnap();}
if(this.options.keyBindings){this._initKeys();}},destroy:function(){this._initEvents(true);this._execEvent('destroy');},_transitionEnd:function(e){if(e.target!=this.scroller||!this.isInTransition){return;}
this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent('scrollEnd');}},_start:function(e){if(utils.eventType[e.type]!=1){if(e.button!==0){return;}}
if(!this.enabled||(this.initiated&&utils.eventType[e.type]!==this.initiated)){return;}
if(this.options.preventDefault&&!utils.isBadAndroid&&!utils.preventDefaultException(e.target,this.options.preventDefaultException)){e.preventDefault();}
var point=e.touches?e.touches[0]:e,pos;this.initiated=utils.eventType[e.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=utils.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;pos=this.getComputedPosition();this._translate(Math.round(pos.x),Math.round(pos.y));this._execEvent('scrollEnd');}else if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent('scrollEnd');}
this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=point.pageX;this.pointY=point.pageY;this._execEvent('beforeScrollStart');},_move:function(e){if(!this.enabled||utils.eventType[e.type]!==this.initiated){return;}
if(this.options.preventDefault){e.preventDefault();}
var point=e.touches?e.touches[0]:e,deltaX=point.pageX- this.pointX,deltaY=point.pageY- this.pointY,timestamp=utils.getTime(),newX,newY,absDistX,absDistY;this.pointX=point.pageX;this.pointY=point.pageY;this.distX+=deltaX;this.distY+=deltaY;absDistX=Math.abs(this.distX);absDistY=Math.abs(this.distY);if(timestamp- this.endTime>300&&(absDistX<10&&absDistY<10)){return;}
if(!this.directionLocked&&!this.options.freeScroll){if(absDistX>absDistY+ this.options.directionLockThreshold){this.directionLocked='h';}else if(absDistY>=absDistX+ this.options.directionLockThreshold){this.directionLocked='v';}else{this.directionLocked='n';}}
if(this.directionLocked=='h'){if(this.options.eventPassthrough=='vertical'){e.preventDefault();}else if(this.options.eventPassthrough=='horizontal'){this.initiated=false;return;}
deltaY=0;}else if(this.directionLocked=='v'){if(this.options.eventPassthrough=='horizontal'){e.preventDefault();}else if(this.options.eventPassthrough=='vertical'){this.initiated=false;return;}
deltaX=0;}
deltaX=this.hasHorizontalScroll?deltaX:0;deltaY=this.hasVerticalScroll?deltaY:0;newX=this.x+ deltaX;newY=this.y+ deltaY;if(newX>0||newX<this.maxScrollX){newX=this.options.bounce?this.x+ deltaX/3:newX>0?0:this.maxScrollX;}
if(newY>0||newY<this.maxScrollY){newY=this.options.bounce?this.y+ deltaY/3:newY>0?0:this.maxScrollY;}
this.directionX=deltaX>0?-1:deltaX<0?1:0;this.directionY=deltaY>0?-1:deltaY<0?1:0;if(!this.moved){this._execEvent('scrollStart');}
this.moved=true;this._translate(newX,newY);if(timestamp- this.startTime>300){this.startTime=timestamp;this.startX=this.x;this.startY=this.y;}},_end:function(e){if(!this.enabled||utils.eventType[e.type]!==this.initiated){return;}
if(this.options.preventDefault&&!utils.preventDefaultException(e.target,this.options.preventDefaultException)){e.preventDefault();}
var point=e.changedTouches?e.changedTouches[0]:e,momentumX,momentumY,duration=utils.getTime()- this.startTime,newX=Math.round(this.x),newY=Math.round(this.y),distanceX=Math.abs(newX- this.startX),distanceY=Math.abs(newY- this.startY),time=0,easing='';this.isInTransition=0;this.initiated=0;this.endTime=utils.getTime();if(this.resetPosition(this.options.bounceTime)){return;}
this.scrollTo(newX,newY);if(!this.moved){if(this.options.tap){utils.tap(e,this.options.tap);}
if(this.options.click){utils.click(e);}
this._execEvent('scrollCancel');return;}
if(this._events.flick&&duration<200&&distanceX<100&&distanceY<100){this._execEvent('flick');return;}
if(this.options.momentum&&duration<300){momentumX=this.hasHorizontalScroll?utils.momentum(this.x,this.startX,duration,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:newX,duration:0};momentumY=this.hasVerticalScroll?utils.momentum(this.y,this.startY,duration,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:newY,duration:0};newX=momentumX.destination;newY=momentumY.destination;time=Math.max(momentumX.duration,momentumY.duration);this.isInTransition=1;}
if(this.options.snap){var snap=this._nearestSnap(newX,newY);this.currentPage=snap;time=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(newX- snap.x),1000),Math.min(Math.abs(newY- snap.y),1000)),300);newX=snap.x;newY=snap.y;this.directionX=0;this.directionY=0;easing=this.options.bounceEasing;}
if(newX!=this.x||newY!=this.y){if(newX>0||newX<this.maxScrollX||newY>0||newY<this.maxScrollY){easing=utils.ease.quadratic;}
this.scrollTo(newX,newY,time,easing);return;}
this._execEvent('scrollEnd');},_resize:function(){var that=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){that.refresh();},this.options.resizePolling);},resetPosition:function(time){var x=this.x,y=this.y;time=time||0;if(!this.hasHorizontalScroll||this.x>0){x=0;}else if(this.x<this.maxScrollX){x=this.maxScrollX;}
if(!this.hasVerticalScroll||this.y>0){y=0;}else if(this.y<this.maxScrollY){y=this.maxScrollY;}
if(x==this.x&&y==this.y){return false;}
this.scrollTo(x,y,time,this.options.bounceEasing);return true;},disable:function(){this.enabled=false;},enable:function(){this.enabled=true;},refresh:function(){var rf=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth- this.scrollerWidth;this.maxScrollY=this.wrapperHeight- this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth;}
if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight;}
this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=utils.offset(this.wrapper);this._execEvent('refresh');this.resetPosition();},on:function(type,fn){if(!this._events[type]){this._events[type]=[];}
this._events[type].push(fn);},off:function(type,fn){if(!this._events[type]){return;}
var index=this._events[type].indexOf(fn);if(index>-1){this._events[type].splice(index,1);}},_execEvent:function(type){if(!this._events[type]){return;}
var i=0,l=this._events[type].length;if(!l){return;}
for(;i<l;i++){this._events[type][i].apply(this,[].slice.call(arguments,1));}},scrollBy:function(x,y,time,easing){x=this.x+ x;y=this.y+ y;time=time||0;this.scrollTo(x,y,time,easing);},scrollTo:function(x,y,time,easing){easing=easing||utils.ease.circular;this.isInTransition=this.options.useTransition&&time>0;if(!time||(this.options.useTransition&&easing.style)){this._transitionTimingFunction(easing.style);this._transitionTime(time);this._translate(x,y);}else{this._animate(x,y,time,easing.fn);}},scrollToElement:function(el,time,offsetX,offsetY,easing){el=el.nodeType?el:this.scroller.querySelector(el);if(!el){return;}
var pos=utils.offset(el);pos.left-=this.wrapperOffset.left;pos.top-=this.wrapperOffset.top;if(offsetX===true){offsetX=Math.round(el.offsetWidth/2- this.wrapper.offsetWidth/2);}
if(offsetY===true){offsetY=Math.round(el.offsetHeight/2- this.wrapper.offsetHeight/2);}
pos.left-=offsetX||0;pos.top-=offsetY||0;pos.left=pos.left>0?0:pos.left<this.maxScrollX?this.maxScrollX:pos.left;pos.top=pos.top>0?0:pos.top<this.maxScrollY?this.maxScrollY:pos.top;time=time===undefined||time===null||time==='auto'?Math.max(Math.abs(this.x-pos.left),Math.abs(this.y-pos.top)):time;this.scrollTo(pos.left,pos.top,time,easing);},_transitionTime:function(time){time=time||0;this.scrollerStyle[utils.style.transitionDuration]=time+'ms';if(!time&&utils.isBadAndroid){this.scrollerStyle[utils.style.transitionDuration]='0.001s';}
if(this.indicators){for(var i=this.indicators.length;i--;){this.indicators[i].transitionTime(time);}}},_transitionTimingFunction:function(easing){this.scrollerStyle[utils.style.transitionTimingFunction]=easing;if(this.indicators){for(var i=this.indicators.length;i--;){this.indicators[i].transitionTimingFunction(easing);}}},_translate:function(x,y){if(this.options.useTransform){this.scrollerStyle[utils.style.transform]='translate('+ x+'px,'+ y+'px)'+ this.translateZ;}else{x=Math.round(x);y=Math.round(y);this.scrollerStyle.left=x+'px';this.scrollerStyle.top=y+'px';}
this.x=x;this.y=y;if(this.indicators){for(var i=this.indicators.length;i--;){this.indicators[i].updatePosition();}}},_initEvents:function(remove){var eventType=remove?utils.removeEvent:utils.addEvent,target=this.options.bindToWrapper?this.wrapper:window;eventType(window,'orientationchange',this);eventType(window,'resize',this);if(this.options.click){eventType(this.wrapper,'click',this,true);}
if(!this.options.disableMouse){eventType(this.wrapper,'mousedown',this);eventType(target,'mousemove',this);eventType(target,'mousecancel',this);eventType(target,'mouseup',this);}
if(utils.hasPointer&&!this.options.disablePointer){eventType(this.wrapper,utils.prefixPointerEvent('pointerdown'),this);eventType(target,utils.prefixPointerEvent('pointermove'),this);eventType(target,utils.prefixPointerEvent('pointercancel'),this);eventType(target,utils.prefixPointerEvent('pointerup'),this);}
if(utils.hasTouch&&!this.options.disableTouch){eventType(this.wrapper,'touchstart',this);eventType(target,'touchmove',this);eventType(target,'touchcancel',this);eventType(target,'touchend',this);}
eventType(this.scroller,'transitionend',this);eventType(this.scroller,'webkitTransitionEnd',this);eventType(this.scroller,'oTransitionEnd',this);eventType(this.scroller,'MSTransitionEnd',this);},getComputedPosition:function(){var matrix=window.getComputedStyle(this.scroller,null),x,y;if(this.options.useTransform){matrix=matrix[utils.style.transform].split(')')[0].split(', ');x=+(matrix[12]||matrix[4]);y=+(matrix[13]||matrix[5]);}else{x=+matrix.left.replace(/[^-\d.]/g,'');y=+matrix.top.replace(/[^-\d.]/g,'');}
return{x:x,y:y};},_initIndicators:function(){var interactive=this.options.interactiveScrollbars,customStyle=typeof this.options.scrollbars!='string',indicators=[],indicator;var that=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){indicator={el:createDefaultScrollbar('v',interactive,this.options.scrollbars),interactive:interactive,defaultScrollbars:true,customStyle:customStyle,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(indicator.el);indicators.push(indicator);}
if(this.options.scrollX){indicator={el:createDefaultScrollbar('h',interactive,this.options.scrollbars),interactive:interactive,defaultScrollbars:true,customStyle:customStyle,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(indicator.el);indicators.push(indicator);}}
if(this.options.indicators){indicators=indicators.concat(this.options.indicators);}
for(var i=indicators.length;i--;){this.indicators.push(new Indicator(this,indicators[i]));}
function _indicatorsMap(fn){for(var i=that.indicators.length;i--;){fn.call(that.indicators[i]);}}
if(this.options.fadeScrollbars){this.on('scrollEnd',function(){_indicatorsMap(function(){this.fade();});});this.on('scrollCancel',function(){_indicatorsMap(function(){this.fade();});});this.on('scrollStart',function(){_indicatorsMap(function(){this.fade(1);});});this.on('beforeScrollStart',function(){_indicatorsMap(function(){this.fade(1,true);});});}
this.on('refresh',function(){_indicatorsMap(function(){this.refresh();});});this.on('destroy',function(){_indicatorsMap(function(){this.destroy();});delete this.indicators;});},_initWheel:function(){utils.addEvent(this.wrapper,'wheel',this);utils.addEvent(this.wrapper,'mousewheel',this);utils.addEvent(this.wrapper,'DOMMouseScroll',this);this.on('destroy',function(){utils.removeEvent(this.wrapper,'wheel',this);utils.removeEvent(this.wrapper,'mousewheel',this);utils.removeEvent(this.wrapper,'DOMMouseScroll',this);});},_wheel:function(e){if(!this.enabled){return;}
e.preventDefault();e.stopPropagation();var wheelDeltaX,wheelDeltaY,newX,newY,that=this;if(this.wheelTimeout===undefined){that._execEvent('scrollStart');}
clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){that._execEvent('scrollEnd');that.wheelTimeout=undefined;},400);if('deltaX'in e){if(e.deltaMode===1){wheelDeltaX=-e.deltaX*this.options.mouseWheelSpeed;wheelDeltaY=-e.deltaY*this.options.mouseWheelSpeed;}else{wheelDeltaX=-e.deltaX;wheelDeltaY=-e.deltaY;}}else if('wheelDeltaX'in e){wheelDeltaX=e.wheelDeltaX/120*this.options.mouseWheelSpeed;wheelDeltaY=e.wheelDeltaY/120*this.options.mouseWheelSpeed;}else if('wheelDelta'in e){wheelDeltaX=wheelDeltaY=e.wheelDelta/120*this.options.mouseWheelSpeed;}else if('detail'in e){wheelDeltaX=wheelDeltaY=-e.detail/3*this.options.mouseWheelSpeed;}else{return;}
wheelDeltaX*=this.options.invertWheelDirection;wheelDeltaY*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){wheelDeltaX=wheelDeltaY;wheelDeltaY=0;}
if(this.options.snap){newX=this.currentPage.pageX;newY=this.currentPage.pageY;if(wheelDeltaX>0){newX--;}else if(wheelDeltaX<0){newX++;}
if(wheelDeltaY>0){newY--;}else if(wheelDeltaY<0){newY++;}
this.goToPage(newX,newY);return;}
newX=this.x+ Math.round(this.hasHorizontalScroll?wheelDeltaX:0);newY=this.y+ Math.round(this.hasVerticalScroll?wheelDeltaY:0);if(newX>0){newX=0;}else if(newX<this.maxScrollX){newX=this.maxScrollX;}
if(newY>0){newY=0;}else if(newY<this.maxScrollY){newY=this.maxScrollY;}
this.scrollTo(newX,newY,0);},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=='string'){this.options.snap=this.scroller.querySelectorAll(this.options.snap);}
this.on('refresh',function(){var i=0,l,m=0,n,cx,cy,x=0,y,stepX=this.options.snapStepX||this.wrapperWidth,stepY=this.options.snapStepY||this.wrapperHeight,el;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return;}
if(this.options.snap===true){cx=Math.round(stepX/2);cy=Math.round(stepY/2);while(x>-this.scrollerWidth){this.pages[i]=[];l=0;y=0;while(y>-this.scrollerHeight){this.pages[i][l]={x:Math.max(x,this.maxScrollX),y:Math.max(y,this.maxScrollY),width:stepX,height:stepY,cx:x- cx,cy:y- cy};y-=stepY;l++;}
x-=stepX;i++;}}else{el=this.options.snap;l=el.length;n=-1;for(;i<l;i++){if(i===0||el[i].offsetLeft<=el[i-1].offsetLeft){m=0;n++;}
if(!this.pages[m]){this.pages[m]=[];}
x=Math.max(-el[i].offsetLeft,this.maxScrollX);y=Math.max(-el[i].offsetTop,this.maxScrollY);cx=x- Math.round(el[i].offsetWidth/2);cy=y- Math.round(el[i].offsetHeight/2);this.pages[m][n]={x:x,y:y,width:el[i].offsetWidth,height:el[i].offsetHeight,cx:cx,cy:cy};if(x>this.maxScrollX){m++;}}}
this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold;}else{this.snapThresholdX=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold);}});this.on('flick',function(){var time=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.x- this.startX),1000),Math.min(Math.abs(this.y- this.startY),1000)),300);this.goToPage(this.currentPage.pageX+ this.directionX,this.currentPage.pageY+ this.directionY,time);});},_nearestSnap:function(x,y){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0};}
var i=0,l=this.pages.length,m=0;if(Math.abs(x- this.absStartX)<this.snapThresholdX&&Math.abs(y- this.absStartY)<this.snapThresholdY){return this.currentPage;}
if(x>0){x=0;}else if(x<this.maxScrollX){x=this.maxScrollX;}
if(y>0){y=0;}else if(y<this.maxScrollY){y=this.maxScrollY;}
for(;i<l;i++){if(x>=this.pages[i][0].cx){x=this.pages[i][0].x;break;}}
l=this.pages[i].length;for(;m<l;m++){if(y>=this.pages[0][m].cy){y=this.pages[0][m].y;break;}}
if(i==this.currentPage.pageX){i+=this.directionX;if(i<0){i=0;}else if(i>=this.pages.length){i=this.pages.length- 1;}
x=this.pages[i][0].x;}
if(m==this.currentPage.pageY){m+=this.directionY;if(m<0){m=0;}else if(m>=this.pages[0].length){m=this.pages[0].length- 1;}
y=this.pages[0][m].y;}
return{x:x,y:y,pageX:i,pageY:m};},goToPage:function(x,y,time,easing){easing=easing||this.options.bounceEasing;if(x>=this.pages.length){x=this.pages.length- 1;}else if(x<0){x=0;}
if(y>=this.pages[x].length){y=this.pages[x].length- 1;}else if(y<0){y=0;}
var posX=this.pages[x][y].x,posY=this.pages[x][y].y;time=time===undefined?this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(posX- this.x),1000),Math.min(Math.abs(posY- this.y),1000)),300):time;this.currentPage={x:posX,y:posY,pageX:x,pageY:y};this.scrollTo(posX,posY,time,easing);},next:function(time,easing){var x=this.currentPage.pageX,y=this.currentPage.pageY;x++;if(x>=this.pages.length&&this.hasVerticalScroll){x=0;y++;}
this.goToPage(x,y,time,easing);},prev:function(time,easing){var x=this.currentPage.pageX,y=this.currentPage.pageY;x--;if(x<0&&this.hasVerticalScroll){x=0;y--;}
this.goToPage(x,y,time,easing);},_initKeys:function(e){var keys={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var i;if(typeof this.options.keyBindings=='object'){for(i in this.options.keyBindings){if(typeof this.options.keyBindings[i]=='string'){this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0);}}}else{this.options.keyBindings={};}
for(i in keys){this.options.keyBindings[i]=this.options.keyBindings[i]||keys[i];}
utils.addEvent(window,'keydown',this);this.on('destroy',function(){utils.removeEvent(window,'keydown',this);});},_key:function(e){if(!this.enabled){return;}
var snap=this.options.snap,newX=snap?this.currentPage.pageX:this.x,newY=snap?this.currentPage.pageY:this.y,now=utils.getTime(),prevTime=this.keyTime||0,acceleration=0.250,pos;if(this.options.useTransition&&this.isInTransition){pos=this.getComputedPosition();this._translate(Math.round(pos.x),Math.round(pos.y));this.isInTransition=false;}
this.keyAcceleration=now- prevTime<200?Math.min(this.keyAcceleration+ acceleration,50):0;switch(e.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){newX+=snap?1:this.wrapperWidth;}else{newY+=snap?1:this.wrapperHeight;}
break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){newX-=snap?1:this.wrapperWidth;}else{newY-=snap?1:this.wrapperHeight;}
break;case this.options.keyBindings.end:newX=snap?this.pages.length-1:this.maxScrollX;newY=snap?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:newX=0;newY=0;break;case this.options.keyBindings.left:newX+=snap?-1:5+ this.keyAcceleration>>0;break;case this.options.keyBindings.up:newY+=snap?1:5+ this.keyAcceleration>>0;break;case this.options.keyBindings.right:newX-=snap?-1:5+ this.keyAcceleration>>0;break;case this.options.keyBindings.down:newY-=snap?1:5+ this.keyAcceleration>>0;break;default:return;}
if(snap){this.goToPage(newX,newY);return;}
if(newX>0){newX=0;this.keyAcceleration=0;}else if(newX<this.maxScrollX){newX=this.maxScrollX;this.keyAcceleration=0;}
if(newY>0){newY=0;this.keyAcceleration=0;}else if(newY<this.maxScrollY){newY=this.maxScrollY;this.keyAcceleration=0;}
this.scrollTo(newX,newY,0);this.keyTime=now;},_animate:function(destX,destY,duration,easingFn){var that=this,startX=this.x,startY=this.y,startTime=utils.getTime(),destTime=startTime+ duration;function step(){var now=utils.getTime(),newX,newY,easing;if(now>=destTime){that.isAnimating=false;that._translate(destX,destY);if(!that.resetPosition(that.options.bounceTime)){that._execEvent('scrollEnd');}
return;}
now=(now- startTime)/ duration;
easing=easingFn(now);newX=(destX- startX)*easing+ startX;newY=(destY- startY)*easing+ startY;that._translate(newX,newY);if(that.isAnimating){rAF(step);}}
this.isAnimating=true;step();},handleEvent:function(e){switch(e.type){case'touchstart':case'pointerdown':case'MSPointerDown':case'mousedown':this._start(e);break;case'touchmove':case'pointermove':case'MSPointerMove':case'mousemove':this._move(e);break;case'touchend':case'pointerup':case'MSPointerUp':case'mouseup':case'touchcancel':case'pointercancel':case'MSPointerCancel':case'mousecancel':this._end(e);break;case'orientationchange':case'resize':this._resize();break;case'transitionend':case'webkitTransitionEnd':case'oTransitionEnd':case'MSTransitionEnd':this._transitionEnd(e);break;case'wheel':case'DOMMouseScroll':case'mousewheel':this._wheel(e);break;case'keydown':this._key(e);break;case'click':if(!e._constructed){e.preventDefault();e.stopPropagation();}
break;}}};function createDefaultScrollbar(direction,interactive,type){var scrollbar=document.createElement('div'),indicator=document.createElement('div');if(type===true){scrollbar.style.cssText='position:absolute;z-index:9999';}
indicator.className='iScrollIndicator';if(direction=='h'){if(type===true){scrollbar.style.cssText+=';height:7px;left:2px;right:2px;bottom:0';indicator.style.height='100%';}
scrollbar.className='iScrollHorizontalScrollbar';}else{if(type===true){scrollbar.style.cssText+=';width:7px;bottom:2px;top:2px;right:1px';indicator.style.width='100%';}
scrollbar.className='iScrollVerticalScrollbar';}
scrollbar.style.cssText+=';overflow:hidden';if(!interactive){scrollbar.style.pointerEvents='none';}
scrollbar.appendChild(indicator);return scrollbar;}
function Indicator(scroller,options){this.wrapper=typeof options.el=='string'?document.querySelector(options.el):options.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=scroller;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var i in options){this.options[i]=options[i];}
this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){utils.addEvent(this.indicator,'touchstart',this);utils.addEvent(window,'touchend',this);}
if(!this.options.disablePointer){utils.addEvent(this.indicator,utils.prefixPointerEvent('pointerdown'),this);utils.addEvent(window,utils.prefixPointerEvent('pointerup'),this);}
if(!this.options.disableMouse){utils.addEvent(this.indicator,'mousedown',this);utils.addEvent(window,'mouseup',this);}}
if(this.options.fade){this.wrapperStyle[utils.style.transform]=this.scroller.translateZ;this.wrapperStyle[utils.style.transitionDuration]=utils.isBadAndroid?'0.001s':'0ms';this.wrapperStyle.opacity='0';}}
Indicator.prototype={handleEvent:function(e){switch(e.type){case'touchstart':case'pointerdown':case'MSPointerDown':case'mousedown':this._start(e);break;case'touchmove':case'pointermove':case'MSPointerMove':case'mousemove':this._move(e);break;case'touchend':case'pointerup':case'MSPointerUp':case'mouseup':case'touchcancel':case'pointercancel':case'MSPointerCancel':case'mousecancel':this._end(e);break;}},destroy:function(){if(this.options.interactive){utils.removeEvent(this.indicator,'touchstart',this);utils.removeEvent(this.indicator,utils.prefixPointerEvent('pointerdown'),this);utils.removeEvent(this.indicator,'mousedown',this);utils.removeEvent(window,'touchmove',this);utils.removeEvent(window,utils.prefixPointerEvent('pointermove'),this);utils.removeEvent(window,'mousemove',this);utils.removeEvent(window,'touchend',this);utils.removeEvent(window,utils.prefixPointerEvent('pointerup'),this);utils.removeEvent(window,'mouseup',this);}
if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper);}},_start:function(e){var point=e.touches?e.touches[0]:e;e.preventDefault();e.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=point.pageX;this.lastPointY=point.pageY;this.startTime=utils.getTime();if(!this.options.disableTouch){utils.addEvent(window,'touchmove',this);}
if(!this.options.disablePointer){utils.addEvent(window,utils.prefixPointerEvent('pointermove'),this);}
if(!this.options.disableMouse){utils.addEvent(window,'mousemove',this);}
this.scroller._execEvent('beforeScrollStart');},_move:function(e){var point=e.touches?e.touches[0]:e,deltaX,deltaY,newX,newY,timestamp=utils.getTime();if(!this.moved){this.scroller._execEvent('scrollStart');}
this.moved=true;deltaX=point.pageX- this.lastPointX;this.lastPointX=point.pageX;deltaY=point.pageY- this.lastPointY;this.lastPointY=point.pageY;newX=this.x+ deltaX;newY=this.y+ deltaY;this._pos(newX,newY);e.preventDefault();e.stopPropagation();},_end:function(e){if(!this.initiated){return;}
this.initiated=false;e.preventDefault();e.stopPropagation();utils.removeEvent(window,'touchmove',this);utils.removeEvent(window,utils.prefixPointerEvent('pointermove'),this);utils.removeEvent(window,'mousemove',this);if(this.scroller.options.snap){var snap=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var time=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.scroller.x- snap.x),1000),Math.min(Math.abs(this.scroller.y- snap.y),1000)),300);if(this.scroller.x!=snap.x||this.scroller.y!=snap.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=snap;this.scroller.scrollTo(snap.x,snap.y,time,this.scroller.options.bounceEasing);}}
if(this.moved){this.scroller._execEvent('scrollEnd');}},transitionTime:function(time){time=time||0;this.indicatorStyle[utils.style.transitionDuration]=time+'ms';if(!time&&utils.isBadAndroid){this.indicatorStyle[utils.style.transitionDuration]='0.001s';}},transitionTimingFunction:function(easing){this.indicatorStyle[utils.style.transitionTimingFunction]=easing;},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?'block':'none';}else if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?'block':'none';}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?'block':'none';}
if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){utils.addClass(this.wrapper,'iScrollBothScrollbars');utils.removeClass(this.wrapper,'iScrollLoneScrollbar');if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right='8px';}else{this.wrapper.style.bottom='8px';}}}else{utils.removeClass(this.wrapper,'iScrollBothScrollbars');utils.addClass(this.wrapper,'iScrollLoneScrollbar');if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right='2px';}else{this.wrapper.style.bottom='2px';}}}
var r=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=Math.max(Math.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+'px';}else{this.indicatorWidth=this.indicator.clientWidth;}
this.maxPosX=this.wrapperWidth- this.indicatorWidth;if(this.options.shrink=='clip'){this.minBoundaryX=-this.indicatorWidth+ 8;this.maxBoundaryX=this.wrapperWidth- 8;}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX;}
this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX));}
if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=Math.max(Math.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+'px';}else{this.indicatorHeight=this.indicator.clientHeight;}
this.maxPosY=this.wrapperHeight- this.indicatorHeight;if(this.options.shrink=='clip'){this.minBoundaryY=-this.indicatorHeight+ 8;this.maxBoundaryY=this.wrapperHeight- 8;}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY;}
this.maxPosY=this.wrapperHeight- this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY));}
this.updatePosition();},updatePosition:function(){var x=this.options.listenX&&Math.round(this.sizeRatioX*this.scroller.x)||0,y=this.options.listenY&&Math.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(x<this.minBoundaryX){if(this.options.shrink=='scale'){this.width=Math.max(this.indicatorWidth+ x,8);this.indicatorStyle.width=this.width+'px';}
x=this.minBoundaryX;}else if(x>this.maxBoundaryX){if(this.options.shrink=='scale'){this.width=Math.max(this.indicatorWidth-(x- this.maxPosX),8);this.indicatorStyle.width=this.width+'px';x=this.maxPosX+ this.indicatorWidth- this.width;}else{x=this.maxBoundaryX;}}else if(this.options.shrink=='scale'&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+'px';}
if(y<this.minBoundaryY){if(this.options.shrink=='scale'){this.height=Math.max(this.indicatorHeight+ y*3,8);this.indicatorStyle.height=this.height+'px';}
y=this.minBoundaryY;}else if(y>this.maxBoundaryY){if(this.options.shrink=='scale'){this.height=Math.max(this.indicatorHeight-(y- this.maxPosY)*3,8);this.indicatorStyle.height=this.height+'px';y=this.maxPosY+ this.indicatorHeight- this.height;}else{y=this.maxBoundaryY;}}else if(this.options.shrink=='scale'&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+'px';}}
this.x=x;this.y=y;if(this.scroller.options.useTransform){this.indicatorStyle[utils.style.transform]='translate('+ x+'px,'+ y+'px)'+ this.scroller.translateZ;}else{this.indicatorStyle.left=x+'px';this.indicatorStyle.top=y+'px';}},_pos:function(x,y){if(x<0){x=0;}else if(x>this.maxPosX){x=this.maxPosX;}
if(y<0){y=0;}else if(y>this.maxPosY){y=this.maxPosY;}
x=this.options.listenX?Math.round(x/this.sizeRatioX):this.scroller.x;y=this.options.listenY?Math.round(y/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(x,y);},fade:function(val,hold){if(hold&&!this.visible){return;}
clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var time=val?250:500,delay=val?0:300;val=val?'1':'0';this.wrapperStyle[utils.style.transitionDuration]=time+'ms';this.fadeTimeout=setTimeout((function(val){this.wrapperStyle.opacity=val;this.visible=+val;}).bind(this,val),delay);}};IScroll.utils=utils;if(typeof module!='undefined'&&module.exports){module.exports=IScroll;}else{_exports.IScroll5=IScroll;}})(window,document,Math);function plotSpline(points,tension,context){function getControlPoints(i){var x0=points[i];var y0=points[i+1];var x1=points[i+2];var y1=points[i+3];var x2=points[i+4];var y2=points[i+5];if(isNaN(x0)||isNaN(x1)||isNaN(x2)||isNaN(y0)||isNaN(y1)||isNaN(y2)){return null;}
var d01=Math.sqrt(Math.pow(x1-x0,2)+Math.pow(y1-y0,2));var d12=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));var fa=tension*d01/(d01+d12);var fb=tension-fa;var p1x=x1+fa*(x0-x2);var p1y=y1+fa*(y0-y2);var p2x=x1-fb*(x0-x2);var p2y=y1-fb*(y0-y2);return[p1x,p1y,p2x,p2y];}
var cp=[];var n=points.length;for(var i=0;i<n-4;i+=2){cp=cp.concat(getControlPoints(i));}
if(cp==null)return;context.save();for(var i=2;i<points.length-5;i+=2){context.beginPath();context.moveTo(points[i],points[i+1]);context.bezierCurveTo(cp[2*i-2],cp[2*i-1],cp[2*i],cp[2*i+1],points[i+2],points[i+3]);context.stroke();context.closePath();}
context.beginPath();context.moveTo(points[0],points[1]);context.quadraticCurveTo(cp[0],cp[1],points[2],points[3]);context.stroke();context.closePath();context.beginPath();context.moveTo(points[n-2],points[n-1]);context.quadraticCurveTo(cp[2*n-10],cp[2*n-9],points[n-4],points[n-3]);context.stroke();context.closePath();context.restore();};_exports.plotSpline=plotSpline;function saveSelection(){if(window.getSelection){var sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){var ranges=[];for(var i=0,len=sel.rangeCount;i<len;++i){ranges.push(sel.getRangeAt(i));}
return ranges;}}else if(document.selection&&document.selection.createRange){return document.selection.createRange();}
return null;}
function restoreSelection(savedSel){if(savedSel){if(window.getSelection){var sel=window.getSelection();sel.removeAllRanges();for(var i=0,len=savedSel.length;i<len;++i){sel.addRange(savedSel[i]);}}else if(document.selection&&savedSel.select){savedSel.select();}}}
_exports.saveSelection=saveSelection;_exports.restoreSelection=restoreSelection;(function(con){'use strict';var prop,method;var empty={};var dummy=function(){};var properties='memory'.split(',');var methods=('assert,clear,count,debug,dir,dirxml,error,exception,group,'+'groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,'+'table,time,timeEnd,timeStamp,trace,warn').split(',');while(prop=properties.pop())con[prop]=con[prop]||empty;while(method=methods.pop())con[method]=con[method]||dummy;})(this.console=this.console||{});return _exports;}
{var _stx3rdParty_js_exports={};if(typeof exports!=="undefined")_stx3rdParty_js_exports=exports;if(typeof define==="function"&&define.amd){define(function(){return _stxThirdParty_js(_stx3rdParty_js_exports);});}else{window.STXThirdParty=_stxThirdParty_js(_stx3rdParty_js_exports);}}})();