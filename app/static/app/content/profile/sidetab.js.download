(function(window,document,$,investFeed){var sideTab=function(elm){this.$elm=$(elm);this.attachAjaxListeners=function($option){var self=this;$option.on('click',function(){self.loadAjaxTab($option);});}
this.attachStaticListeners=function($option){}
this.loadAjaxTab=function($option){var self=this;var $loadingIcon=self.$elm.find('.st-ajax-loading');var $content=$('.st-tab#'+ $option.data('tab-target'));var storedContent=$content.html();$loadingIcon.show();$.ajax({url:investFeed.base+'sidetab/ajax/'+ $option.data('tab-module'),type:'GET',data:{filter:$option.data('tab-filter')},cache:false,success:function(response){self.$tabOptions.removeClass('st-active');$option.addClass('st-active');$content.html(response);},error:function(){$content.html(storedContent);},complete:function(){$loadingIcon.hide();}});}};sideTab.prototype={init:function(){var self=this;self.$tabOptions=$(self.$elm.find('.st-options .st-option'));self.$tabOptions.each(function(){var $option=$(this);if($option.data('tab-type')){if($option.data('tab-type')=='ajax'){self.attachAjaxListeners($option);}else if($option.data('tab-type')=='static'){self.attachStaticListeners($option);}}});if(!self.$tabOptions.hasClass('st-active')&&$(self.$tabOptions[0]).data('tab-type')=="ajax"){self.loadAjaxTab($(self.$tabOptions[0]));}
return this;}};$.fn.sideTab=function(){return this.each(function(){new sideTab(this).init();});};window.sideTab=sideTab;})(window,document,jQuery,investFeed);